{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home-routing.module.ts","./src/app/home/home.module.ts","./src/app/home/home.page.ts","./src/app/home/home.page.html","./src/app/services/geocode.service.ts","./src/app/services/map.service.ts","./node_modules/@capacitor/device/dist/esm/definitions.js","./node_modules/@capacitor/device/dist/esm/index.js","./node_modules/@capacitor/google-maps/dist/esm/definitions.js","./node_modules/@capacitor/google-maps/dist/esm/implementation.js","./node_modules/@capacitor/google-maps/dist/esm/index.js","./node_modules/@capacitor/google-maps/dist/esm/map.js","./node_modules/rxjs/_esm2015/internal/observable/interval.js"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\nimport { CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\nimport { SharedTranslationsModule } from '../shared/shared-translations.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule,\r\n    SharedTranslationsModule\r\n  ],\r\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","import { AfterViewInit, ChangeDetectorRef, Component, ElementRef, NgZone, OnInit, ViewChild } from '@angular/core';\r\nimport { Geolocation, Position } from '@capacitor/geolocation';\r\nimport { ModalController, Platform, NavController, ToastController, ActionSheetController, AlertController, ModalOptions } from '@ionic/angular';\r\nimport { OverlayService } from '../services/overlay.service';\r\nimport { GeocodeService } from '../services/geocode.service';\r\nimport { MapService } from '../services/map.service';\r\nimport { AvatarService } from '../services/avatar.service';\r\nimport { Drivers } from '../interfaces/drivers';\r\nimport { BehaviorSubject, interval, Observable, Subscription, timer } from 'rxjs';\r\nimport { doc, onSnapshot, Firestore, updateDoc, deleteField, getDoc, collection, addDoc, setDoc, serverTimestamp } from '@angular/fire/firestore';\r\nimport { Auth } from '@angular/fire/auth';\r\nimport { Marker, Polyline } from '@capacitor/google-maps';\r\nimport { Device } from '@capacitor/device';\r\nimport { Network } from '@capacitor/network';\r\nimport { LatLng } from '@capacitor/google-maps/dist/typings/definitions';\r\nimport { LatLngLiteral } from '@googlemaps/google-maps-services-js';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { App } from '@capacitor/app';\r\nimport { EnrouteChatComponent } from '../enroute-chat/enroute-chat.component';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { TripSummaryComponent } from '../trip-summary/trip-summary.component';\r\nimport { Router } from '@angular/router';\r\n\r\n\r\ndeclare var google;\r\ndeclare var window: any; // Declare window to access BackgroundGeolocation\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage implements AfterViewInit {\r\n  profile = null;\r\n  @ViewChild('map') mapRef: ElementRef<HTMLElement>;\r\n  @ViewChild('mapElement') mapElement: ElementRef<HTMLElement>;\r\n  @ViewChild('topBar', { static: false }) topBar: ElementRef<HTMLElement>;\r\n  @ViewChild('bottomBar', { static: false }) bottomBar: ElementRef<HTMLElement>;\r\n  private routeUpdateSubscription: Subscription;\r\n\r\n  address: any = 'Unknown';\r\n  bookingStage: any = false;\r\n  confirmStage: any = false;\r\n  trackingStage: any = false;\r\n  drivingToDestinationStage: any = false;\r\n  data: any;\r\n  cash: any = false;\r\n  state: any = [];\r\n  mapPinStage: boolean;\r\n  DestinationLatLng: { lat: any; lng: any; };\r\n  mapPinDrag: any;\r\n  showResetLocationButton: any = false;\r\n  showloader: boolean;\r\n  mapClass: any;\r\n  destinationAddress: string = 'Drag To Pick Destination';\r\n  locationAddress: string = 'Loading...';\r\n  distance: any;\r\n  direction: any;\r\n  actualDestination: any;\r\n  markers: any;\r\n  allDrivers: Observable<Drivers[]>;\r\n  NoDrivers: boolean;\r\n  driverMarker: string;\r\n  driver_duration_apart: number;\r\n  driver_number_of_seats: any;\r\n  price: any = 0;\r\n  carname: any;\r\n  driver_ID: any;\r\n  bounds: any;\r\n  DriverLatLng: { lat: any; lng: any; };\r\n  driver_marker: any;\r\n  driver_marker1: any;\r\n  destinationMarker1: any;\r\n  drivers_Requested: any[];\r\n  current_Request_Number: number = -1;\r\n  Driver_Rejected: any;\r\n  numCalls: any;\r\n  currentDriver: any;\r\n  unsubscribe: import(\"@angular/fire/firestore\").Unsubscribe;\r\n  driverInfo: import(\"@angular/fire/firestore\").DocumentData;\r\n  currentState: boolean;\r\n  duration: any;\r\n  riderCleared: any;\r\n  updateDriverSubcription: any;\r\n  canCheck: boolean;\r\n  rider_marker: any;\r\n  marker1: any;\r\n  marker2: any;\r\n  actualLocation: string;\r\n  LatLng: { lat: number; lng: number; };\r\n  mapy: boolean;\r\n  AllCarMarkers: Marker[];\r\n  _carmarkers: any[];\r\n  cards: import(\"@angular/fire/firestore\").DocumentData[];\r\n  selected: any;\r\n  selectedCard: any;\r\n  closeDrivers: any;\r\n  approve: boolean = true;\r\n\r\n  canStart: any;\r\n  countDown: any;\r\n  riderDestination: any;\r\n  acceptedState: boolean = false;\r\n  distanceText: any;\r\n  durationText: any;\r\n  driverCleared: boolean;\r\n  FCOUNT: boolean;\r\n  riderInfo: import(\"@angular/fire/firestore\").DocumentData;\r\n  earnings: any;\r\n  coordinates: Position;\r\n  driverData: import(\"@angular/fire/firestore\").DocumentData;\r\n  riderLocation: { lat: number, lng: number } | null = null;\r\n  destinationMarker: string;\r\n  newPoly: string[];\r\n  animatedMarker: any;\r\n  private countdownStarted = false;\r\n  private countdownInterval: any;\r\n  rideLostShown: boolean;\r\n  isConnected: boolean;\r\n  private networkStatus$ = new BehaviorSubject<boolean>(true);\r\n  private router: Router;\r\n  routePolyline: google.maps.Polyline;\r\n  countdownTimer: number;\r\n  localCountdown: number;\r\n  countdownWatcher: import(\"@angular/fire/firestore\").Unsubscribe;\r\n  canShowButton: boolean = false;\r\n  removed: any;\r\n  backButtonSubscription: any;\r\n  requestID: any;\r\n\r\n  // Add these new variables to track different stages separately\r\n  driverToRiderDistance: string;\r\n  driverToRiderDuration: string;\r\n  riderToDestinationDistance: string;\r\n  riderToDestinationDuration: string;\r\n\r\n  constructor(\r\n    private auth: Auth,\r\n    public map: MapService,\r\n    private firestore: Firestore,\r\n    private readonly database: AvatarService,\r\n    private ngZone: NgZone,\r\n    private geocode: GeocodeService,\r\n    private overlay: OverlayService,\r\n    private cdr: ChangeDetectorRef,\r\n    private toastController: ToastController,\r\n    private actionSheetController: ActionSheetController,\r\n    private platform: Platform,\r\n    private alertController: AlertController,\r\n    private modalCtrl: ModalController,\r\n    private translate: TranslateService\r\n  ) {}\r\n\r\n  async ngAfterViewInit() {\r\n    try {\r\n      this.EnterBookingStage();\r\n      \r\n      // Check and request geolocation permissions\r\n      const permissionStatus = await Geolocation.checkPermissions();\r\n      \r\n      if (permissionStatus.location !== 'granted') {\r\n        // Show alert explaining why we need location access\r\n        await this.showLocationPermissionAlert();\r\n        const requestResult = await Geolocation.requestPermissions();\r\n        \r\n        if (requestResult.location !== 'granted') {\r\n          throw new Error('Location permission is required to use this app');\r\n        }\r\n      }\r\n\r\n      const coordinates = await Geolocation.getCurrentPosition({ enableHighAccuracy: true });\r\n      this.coordinates = coordinates;\r\n      await this.initializeNetworkMonitoring();\r\n\r\n      \r\n\r\n      await this.fetchOnlineState();\r\n      \r\n      await this.map.createMap(this.mapRef.nativeElement, coordinates);\r\n      this.mapy = true;\r\n\r\n      this.setMapHeight();\r\n      window.addEventListener('resize', this.setMapHeight.bind(this));\r\n      this.initializeBackButtonCustomHandler();\r\n  \r\n      this.LatLng = {\r\n        lat: coordinates.coords.latitude,\r\n        lng: coordinates.coords.longitude,\r\n      };\r\n      this.database.updateDriverLocation(this.LatLng);\r\n  \r\n      this.DestinationLatLng = {\r\n        lat: coordinates.coords.latitude,\r\n        lng: coordinates.coords.longitude,\r\n      };\r\n  \r\n      this.database.getEarnings().subscribe(async (d) => {\r\n        this.earnings = d.Earnings;\r\n      });\r\n  \r\n      this.database.getCards().subscribe(async (d) => {\r\n        this.cards = d;\r\n        this.approve = false;\r\n        this.cards.forEach((element) => {\r\n          if (element.selected) {\r\n            this.selected = element;\r\n            this.selectedCard = element.name;\r\n          }\r\n        });\r\n      });\r\n  \r\n      await this.handleDriverRequestSnapshot();\r\n  \r\n      this.actualLocation = this.map.actualLocation;\r\n      this.locationAddress = this.map.locationAddress;\r\n  \r\n      this.map.newMap.setOnCameraIdleListener(() => {\r\n        this.ngZone.run(() => {\r\n          this.showResetLocationButton = true;\r\n        });\r\n      });\r\n\r\n      \r\n    } catch (e) {\r\n      if (e.code === 1) { // Permission denied error code\r\n        await this.handleLocationPermissionDenied();\r\n      } else {\r\n        this.overlay.showAlert('Error', e.message || 'An unexpected error occurred');\r\n      }\r\n    }\r\n  \r\n    // Start polling position\r\n    this.startPollingPosition();\r\n  \r\n    // Start background geolocation for mobile devices\r\n   await this.checkPlatform();\r\n  }\r\n\r\n\r\n  private async initializeNetworkMonitoring() {\r\n    const status = await Network.getStatus();\r\n    this.isConnected = status.connected;\r\n    this.networkStatus$.next(this.isConnected);\r\n    console.log('Network monitoring initialized. Initial status:', this.isConnected);\r\n\r\n    Network.addListener('networkStatusChange', (status) => {\r\n      console.log('Network status changed:', status);\r\n      this.isConnected = status.connected;\r\n      this.networkStatus$.next(this.isConnected);\r\n    });\r\n\r\n    this.networkStatus$.subscribe((isConnected) => {\r\n      this.ngZone.run(() => {\r\n        if (isConnected) {\r\n          this.router.navigate(['/tabs']);\r\n        } else {\r\n          this.router.navigate(['/network']);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  initializeBackButtonCustomHandler() {\r\n    this.backButtonSubscription = this.platform.backButton.subscribeWithPriority(10, () => {\r\n      this.handleBackButton();\r\n    });\r\n  }\r\n\r\n  handleBackButton() {\r\n    if (this.bookingStage) {\r\n      this.showExitConfirmation();\r\n    } else if (this.confirmStage) {\r\n      this.ResetState();\r\n    } else if (this.trackingStage) {\r\n      this.showCancelRideConfirmation();\r\n    } else if (this.drivingToDestinationStage) {\r\n      this.showCannotExitAlert();\r\n    }\r\n  }\r\n\r\n  async showExitConfirmation() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Exit App',\r\n      message: 'Are you sure you want to exit the app?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: 'Exit',\r\n          handler: () => {\r\n            navigator['app'].exitApp();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async showCancelRideConfirmation() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Cancel Ride',\r\n      message: 'Are you sure you want to cancel this ride?',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            // Implement logic to cancel the ride\r\n            console.log('Ride cancelled');\r\n            this.presentCancelRideActionSheet();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async showCannotExitAlert() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Cannot Exit',\r\n      message: 'You cannot exit the app during an active trip.',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async checkPlatform() {\r\n    const info = await Device.getInfo();\r\n    if (info.platform === 'ios' || info.platform === 'android') {\r\n      this.startBackgroundGeolocation();\r\n    }\r\n  }\r\n\r\n  async startPollingPosition() {\r\n    const pollInterval = 5000; // Polling interval in milliseconds\r\n  \r\n    const updatePosition = async () => {\r\n      try {\r\n        const position = await Geolocation.getCurrentPosition({ enableHighAccuracy: true });\r\n        this.DriverLatLng = {\r\n          lat: position.coords.latitude,\r\n          lng: position.coords.longitude,\r\n        };\r\n        this.database.updateDriverLocation(this.DriverLatLng);\r\n      } catch (error) {\r\n        console.error('Error getting position:', error);\r\n      }\r\n      setTimeout(updatePosition, pollInterval); // Poll every pollInterval milliseconds\r\n    };\r\n  \r\n    updatePosition();\r\n  }\r\n\r\n\r\n  async checkAndClearIncompleteRide() {\r\n    const user = this.auth.currentUser;\r\n    if (user) {\r\n      const driverDocRef = doc(this.firestore, 'Drivers', user.uid);\r\n      const driverDoc = await getDoc(driverDocRef);\r\n      const driverData = driverDoc.data();\r\n  \r\n      if (driverData && driverData.currentRequestId) {\r\n        const requestRef = doc(this.firestore, 'Request', driverData.currentRequestId);\r\n        const requestDoc = await getDoc(requestRef);\r\n        const requestData = requestDoc.data();\r\n  \r\n        if (requestData && requestData.status !== 'completed') {\r\n          // Clear currentRequestId if the ride is not completed\r\n          await this.clearCurrentRequestId(user.uid);\r\n          this.lastHandledState = null;\r\n          console.log('Cleared incomplete ride on app restart.');\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async startBackgroundGeolocation() {\r\n    try {\r\n      const info = await Device.getInfo();\r\n      \r\n      // Only proceed with background geolocation setup on mobile devices\r\n      if (info.platform === 'ios' || info.platform === 'android') {\r\n        if (!window.BackgroundGeolocation) {\r\n          console.warn('BackgroundGeolocation is not available on this platform');\r\n          return;\r\n        }\r\n\r\n        const options = {\r\n          stationaryRadius: 50,\r\n          distanceFilter: 50,\r\n          desiredAccuracy: 10,\r\n          debug: true,\r\n          notificationTitle: 'Background tracking',\r\n          notificationText: 'enabled',\r\n          startOnBoot: true,\r\n          stopOnTerminate: false,\r\n          locationProvider: window.BackgroundGeolocation.provider.ANDROID_ACTIVITY_PROVIDER,\r\n          interval: 60000,\r\n          fastestInterval: 5000,\r\n          activitiesInterval: 10000,\r\n          stopOnStillActivity: false,\r\n        };\r\n\r\n        window.BackgroundGeolocation.configure(options);\r\n\r\n        window.BackgroundGeolocation.on('location', (location) => {\r\n          console.log('Location update: ', location);\r\n          this.DriverLatLng = {\r\n            lat: location.latitude,\r\n            lng: location.longitude,\r\n          };\r\n          this.database.updateDriverLocation(this.DriverLatLng);\r\n        });\r\n\r\n        window.BackgroundGeolocation.start();\r\n      } else {\r\n        // For web platform, just use regular position polling\r\n        console.log('Using regular position polling for web platform');\r\n        this.startPollingPosition();\r\n      }\r\n    } catch (e) {\r\n      console.error('BackgroundGeolocation configuration error: ', e);\r\n      // Fallback to regular position polling on error\r\n      this.startPollingPosition();\r\n    }\r\n  }\r\n  \r\n  async stopBackgroundGeolocation() {\r\n    const info = await Device.getInfo();\r\n    if ((info.platform === 'ios' || info.platform === 'android') && window.BackgroundGeolocation) {\r\n      window.BackgroundGeolocation.stop();\r\n    }\r\n  }\r\n  \r\n\r\n  getRiderLocation(driverId: string): void {\r\n    this.database.getRiderLocation(driverId)\r\n    .then(location => {\r\n      this.riderLocation = location;\r\n      this.DestinationLatLng = {\r\n        lat: this.riderLocation.lat,\r\n        lng: this.riderLocation.lng,\r\n      };\r\n      console.log(this.riderLocation); // For testing purposes\r\n    })\r\n    .catch(error => {\r\n      console.error('Error fetching driver location:', error);\r\n    });\r\n  }\r\n\r\n\r\n  lastHandledState: string | null = null;\r\n\r\n  private driverRequestUnsubscribe: () => void;\r\n\r\n  async handleDriverRequestSnapshot() {\r\n    this.auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        const driverDocRef = doc(this.firestore, 'Drivers', user.uid);\r\n        onSnapshot(driverDocRef, async (driverDoc) => {\r\n          this.driverData = driverDoc.data();\r\n          if (this.driverData && this.driverData.currentRequestId) {\r\n            const requestRef = doc(this.firestore, 'Request', this.driverData.currentRequestId);\r\n            if (this.driverRequestUnsubscribe) {\r\n              this.driverRequestUnsubscribe();\r\n            }\r\n            this.driverRequestUnsubscribe = onSnapshot(requestRef, async (doc) => {\r\n              console.log(\"It happened Here\", doc.data());\r\n              this.riderInfo = doc.data();\r\n              if (this.riderInfo && this.lastHandledState !== this.riderInfo.status) {\r\n                console.log(\"Should trigger\", this.riderInfo.status);\r\n                this.lastHandledState = this.riderInfo.status; // Update the last handled state\r\n                switch (this.riderInfo.status) {\r\n                  case 'cancelled':\r\n                    await this.handleCancelledState(this.riderInfo);\r\n                    break;\r\n                  case 'pending':\r\n                    await this.handlePendingState(this.riderInfo);\r\n                    break;\r\n                  case 'confirmed':\r\n                    await this.handleConfirmedState(this.riderInfo);\r\n                    break;\r\n                  case 'started':\r\n                    await this.handleStartedState(this.riderInfo);\r\n                    break;\r\n                  case 'stopped':\r\n                    await this.handleStoppedState(this.riderInfo);\r\n                    break;\r\n                  default:\r\n                    console.error('Unknown ride status:', this.riderInfo.status);\r\n                    break;\r\n                }\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  \r\n  async handlePendingState(doco) {\r\n    try {\r\n\r\n    console.log('Handling the pending state:', doco);\r\n    const userDocRef = doc(this.firestore, `Riders`, doco.Rider_id);\r\n  \r\n    const docSnapshot = await getDoc(userDocRef);\r\n  \r\n    if (docSnapshot.exists()) {\r\n      console.log(\"I'm here!!!!!!!!!!\");\r\n  \r\n      if (!this.acceptedState) {\r\n        if (!this.countdownStarted) {\r\n          this.countdownStarted = true; // Flag to ensure countdown starts only once\r\n           \r\n          // Initial state setup\r\n          this.EnterConfirmStage();\r\n          this.cash = !doco.card;\r\n\r\n          this.DestinationLatLng = {\r\n            lat: this.riderInfo.Des_lat,\r\n            lng: this.riderInfo.Des_lng,\r\n          };\r\n  \r\n          this.getDistanceandDirections();\r\n          this.map.newMap.enableCurrentLocation(false);\r\n  \r\n          // Start the countdown watcher\r\n          this.watchCountdown(doco);\r\n        }\r\n      }\r\n    }\r\n  } catch (e) {\r\n    this.overlay.showAlert('Confirm Error', e);\r\n  }\r\n  }\r\n  \r\n  \r\n  watchCountdown(doco) {\r\n    const requestRef = doc(this.firestore, 'Request', doco.requestId);\r\n    this.requestID = doco.requestId;\r\n    \r\n    const countdownWatcher = onSnapshot(requestRef, async (doc) => {\r\n      if (doc.exists()) {\r\n        const data = doc.data();\r\n        const currentCountdown = data.countDown;\r\n  \r\n        console.log('Current countdown:', currentCountdown);\r\n  \r\n        if (currentCountdown <= 1) {\r\n          await this.checkAndClearIncompleteRide();\r\n          this.ClearRide();\r\n          this.FCOUNT = true;\r\n          this.lastHandledState = null;\r\n          this.overlay.showAlert('Lost', 'Ride Lost');\r\n          countdownWatcher(); // Unsubscribe from changes\r\n          this.acceptedState = false;\r\n        }\r\n      } else {\r\n        console.error('Ride request document does not exist.');\r\n      }\r\n    });\r\n  \r\n    this.countdownWatcher = countdownWatcher; // Store the unsubscribe function if needed\r\n  }\r\n  \r\n  \r\n\r\n  \r\nasync UpdateCountDown(time, requestId) {\r\n  try {\r\n    const requestDocRef = doc(this.firestore, \"Request\", requestId);\r\n    await updateDoc(requestDocRef, { countDown: time });\r\n    return true;\r\n  } catch (e) {\r\n    console.log(e);\r\n    return null;\r\n  }\r\n}\r\n\r\nasync startCountdown(initialTime, requestId) {\r\n  let timeRemaining = initialTime;\r\n\r\n  const updateCountdown = async () => {\r\n    if (timeRemaining > 0) {\r\n      await this.UpdateCountDown(timeRemaining, requestId);\r\n     // this.updatePieChart(timeRemaining, initialTime);\r\n      timeRemaining--;\r\n      setTimeout(updateCountdown, 1000); // Update every second\r\n    }\r\n  };\r\n\r\n  updateCountdown();\r\n}\r\n\r\n  \r\n\r\n  \r\n  async completeRideAndProcessPayment(doc) {\r\n    // Complete the ride, process payment, and update ride history\r\n    const rideData = doc;\r\n    console.log(\"This is the ride data: \", rideData)\r\n    await this.processPayment(rideData);\r\n    await this.updateRideHistory(rideData);\r\n    \r\n    \r\n  }\r\n  \r\n  async processPayment(rideData) {\r\n    // Logic to process payment\r\n    console.log('Processing payment for ride:', rideData);\r\n    // Example: Call a payment API and update Firestore with payment status\r\n    const Drivershare = (80 / 100) * rideData.price;\r\n    const amt = rideData.price - Drivershare;\r\n    await this.database.updateEarnings(amt + this.earnings)\r\n  }\r\n  \r\n  async updateRideHistory(rideData) {\r\n    // Logic to update ride history\r\n    console.log('Updating ride history for ride:', rideData);\r\n    // Example: Add ride data to a 'RideHistory' collection in Firestore\r\n    await this.database.createHistory(rideData);\r\n\r\n  }\r\n  \r\n\r\n  async clearCurrentRequestId(driverId: string) {\r\n    const driverDocRef = doc(this.firestore, 'Drivers', driverId);\r\n    await updateDoc(driverDocRef, {\r\n      currentRequestId: deleteField()\r\n    });\r\n  }\r\n  \r\n  async handleConfirmedState(doc) {\r\n    try {\r\n      await this.ResetState();\r\n      await this.getRiderLocation(this.riderInfo.Rider_id);\r\n\r\n      this.DestinationLatLng = {\r\n        lat: (this.riderLocation?.lat) ?? this.riderInfo.Loc_lat,\r\n        lng: (this.riderLocation?.lng) ?? this.riderInfo.Loc_lng,\r\n      };\r\n\r\n      // Show a more specific message\r\n      this.overlay.showLoader('Navigating to rider...');\r\n      \r\n      // Pre-fetch data and setup markers concurrently\r\n      await Promise.all([\r\n        this.handleDriverToRider(this.DriverLatLng, this.DestinationLatLng),\r\n        this.database.updateOnlineState(false) // Update driver status while loading\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error in handleConfirmedState:', error);\r\n      this.overlay.showAlert('Error', 'Failed to initialize navigation');\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  async handleStartedState(doc) {\r\n    try {\r\n      await this.ResetState();\r\n      \r\n      this.DestinationLatLng = {\r\n        lat: doc.Des_lat,\r\n        lng: doc.Des_lng,\r\n      };\r\n\r\n      // Show a more specific message\r\n      this.overlay.showLoader('Starting trip...');\r\n      \r\n      // Pre-fetch data and setup markers concurrently\r\n      await Promise.all([\r\n        this.handleRiderToDestination(this.DriverLatLng, this.DestinationLatLng),\r\n        this.database.updateOnlineState(false) // Update driver status while loading\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error in handleStartedState:', error);\r\n      this.overlay.showAlert('Error', 'Failed to start trip');\r\n    }\r\n  }\r\n  \r\n  async handleStoppedState(doc) {\r\n    await this.checkAndClearIncompleteRide();\r\n    // Unsubscribe from the current request listener\r\n    if (this.driverRequestUnsubscribe) {\r\n      this.driverRequestUnsubscribe();\r\n    }\r\n\r\n    this.clearPrevMarkers()\r\n    if (this.newPoly) {\r\n      await this.clearPolyline(this.newPoly);\r\n    }\r\n\r\n    // Show trip summary modal before returning to home\r\n    await this.showTripSummary(doc);\r\n\r\n    // Complete the ride and process payment\r\n    await this.completeRideAndProcessPayment(doc);\r\n    await this.database.updateOnlineState(true);\r\n    this.map.newMap.enableCurrentLocation(true);\r\n    this.acceptedState = false;\r\n  }\r\n\r\n  async showTripSummary(doc) {\r\n    // Use this.requestID if available, otherwise try to get it from the trip data\r\n    const requestIdToUse = this.requestID || this.driverData?.currentRequestId || doc.requestId;\r\n    \r\n    const modal = await this.modalCtrl.create({\r\n      component: TripSummaryComponent,\r\n      componentProps: {\r\n        tripData: doc,\r\n        requestId: requestIdToUse\r\n      },\r\n      cssClass: 'trip-summary-modal',\r\n      backdropDismiss: false\r\n    });\r\n\r\n    await modal.present();\r\n    \r\n    const { data } = await modal.onDidDismiss();\r\n    \r\n    // After modal is dismissed, return to home\r\n    this.EnterBookingStage();\r\n    await this.ReturnHome();\r\n  }\r\n\r\n  setMapHeight() {\r\n      const bottomBarHeight = this.bottomBar.nativeElement.offsetHeight;\r\n      const availableHeight = window.innerHeight - bottomBarHeight;\r\n      this.mapRef.nativeElement.style.height = `${availableHeight}px`;\r\n  }\r\n\r\n  setMapHeight2HandleDrivertoRider() {\r\n      const bottomBarHeight = this.bottomBar.nativeElement.offsetHeight + 100;\r\n      const availableHeight = window.innerHeight - bottomBarHeight;\r\n      this.mapRef.nativeElement.style.height = `${availableHeight}px`;\r\n  }\r\n\r\n  setMapHeightDrivertoDestination() {\r\n      const bottomBarHeight = this.bottomBar.nativeElement.offsetHeight;\r\n      const availableHeight = window.innerHeight - bottomBarHeight;\r\n      this.mapRef.nativeElement.style.height = `${availableHeight}px`;\r\n  }\r\n\r\n  async handleCancelledState(data) {\r\n    console.log(`Ride was cancelled by ${data.canceledBy} for reason: ${data.cancellationReason}`);\r\n  \r\n    if (data.canceledBy == 'rider') {\r\n      this.overlay.showAlert('Cancelled', 'Rider cancelled');\r\n    } \r\n\r\n    this.ClearRide();\r\n    this.removed = true;\r\n    console.log('Ride is cancelled.');\r\n    this.acceptedState = false;\r\n    // Clear currentRequestId in driverData\r\n    const driverDocRef = doc(this.firestore, 'Drivers', this.auth.currentUser.uid);\r\n    await updateDoc(driverDocRef, { currentRequestId: null });\r\n    await this.database.updateOnlineState(true);\r\n    await this.fetchOnlineState()\r\n  }\r\n\r\n\r\n  async EnterChat(): Promise<void> {\r\n    const options: ModalOptions = {\r\n        component: EnrouteChatComponent,\r\n        componentProps: {\r\n            userId: this.requestID,\r\n            message: \"\"\r\n        },\r\n        swipeToClose: true,\r\n    };\r\n    \r\n    const modal = await this.modalCtrl.create(options);\r\n    return await modal.present();\r\n    }\r\n\r\n\r\n  startTimer(sec) {\r\n    const nop = interval(1000).subscribe(async () => {\r\n      await this.database.updateCountDown(sec);\r\n      sec--;\r\n      if (sec == 0) {\r\n        nop.unsubscribe();\r\n      }\r\n    });\r\n  }\r\n\r\n  async chooseCard(event) {\r\n    try {\r\n      this.overlay.showLoader('Selecting Card..');\r\n      await this.database.updateCard(this.selected.name, this.selected.number, this.selected.type, this.selected.id, false);\r\n      for (const element of this.cards) {\r\n        if (element.name == event) {\r\n          await this.database.updateCard(element.name, element.number, element.type, element.id, true);\r\n          this.overlay.hideLoader();\r\n        }\r\n      }\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n    }\r\n  }\r\n\r\n  async AcceptRide() {\r\n    try {\r\n      this.acceptedState = true;\r\n      const requestRef = doc(this.firestore, 'Request', this.driverData.currentRequestId);\r\n      await updateDoc(requestRef, { status: 'confirmed' });\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n      // Retry or provide user feedback\r\n    }\r\n  }\r\n\r\n  async resetLocation(): Promise<void> {\r\n    await this.map.newMap.setCamera({\r\n      animate: true,\r\n      animationDuration: 500,\r\n      zoom: 15,\r\n      coordinate: this.LatLng,\r\n    });\r\n    this.showResetLocationButton = false;\r\n  }\r\n\r\n  async PickUp() {\r\n    try {\r\n      this.canShowButton = false;\r\n      this.overlay.showLoader('Picking Up..');\r\n      const requestRef = doc(this.firestore, 'Request', this.driverData.currentRequestId);\r\n      await updateDoc(requestRef, { status: 'started' });\r\n      \r\n      this.overlay.hideLoader();\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n    }\r\n  }\r\n\r\n  async DropOff() {\r\n    try {\r\n      const requestRef = doc(this.firestore, 'Request', this.driverData.currentRequestId);\r\n      await updateDoc(requestRef, { status: 'stopped' });\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n    }\r\n  }\r\n\r\n  async Navigate() {\r\n    // Implementation for navigation\r\n  }\r\n\r\n  async fetchOnlineState() {\r\n    try {\r\n      console.log(\"Fetching online state...\");\r\n      const onlineState = await this.database.getOnlineState();\r\n      console.log('Online state fetched from database:', onlineState); // Log the fetched state\r\n      this.currentState = onlineState;\r\n      console.log('Current state updated to:', this.currentState);\r\n      this.cdr.detectChanges();\r\n    } catch (e) {\r\n      console.error('Error fetching online state:', e);\r\n      this.overlay.showAlert('Error', 'Failed to fetch online state.');\r\n    }\r\n  }\r\n  \r\n\r\n\r\n\r\n\r\n  async SwitchOn() {\r\n    try {\r\n      this.approve = true;\r\n      console.log('Attempting to go online...');\r\n      await this.database.updateOnlineState(true);\r\n      await this.fetchOnlineState(); // Fetch the current state from the database\r\n      console.log('Successfully went online.');\r\n    } catch (e) {\r\n      console.error('Error in SwitchOn:', e);\r\n      this.overlay.showAlert('Error', 'Failed to go online.');\r\n    } finally {\r\n      this.approve = false;\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n  \r\n  async SwitchOff() {\r\n    try {\r\n      this.approve = true;\r\n      console.log('Attempting to go offline...');\r\n      await this.database.updateOnlineState(false);\r\n      await this.fetchOnlineState(); // Fetch the current state from the database\r\n      console.log('Successfully went offline.');\r\n    } catch (e) {\r\n      console.error('Error in SwitchOff:', e);\r\n      this.overlay.showAlert('Error', 'Failed to go offline.');\r\n    } finally {\r\n      this.approve = false;\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n  \r\n  \r\n  private async clearPrevMarkers() {\r\n    try {\r\n\r\n      // Clear animated marker\r\n      if (this.animatedMarker) {\r\n        await this.clearMarker(this.animatedMarker);\r\n        this.animatedMarker = null;\r\n      }\r\n  \r\n      if (this.routeUpdateSubscription) {\r\n        this.routeUpdateSubscription.unsubscribe();\r\n      }\r\n       // Clear other markers\r\n       if (this.rider_marker) {\r\n        await this.clearMarker(this.rider_marker);\r\n        this.rider_marker = null;\r\n      }\r\n  \r\n      // Clear other markers\r\n      if (this.driver_marker) {\r\n        await this.clearMarker(this.driver_marker);\r\n        this.driver_marker = null;\r\n      }\r\n  \r\n      // Clear other markers\r\n      if (this.destinationMarker) {\r\n        await this.clearMarker(this.destinationMarker);\r\n        this.destinationMarker = null;\r\n      }\r\n\r\n       // Clear other markers\r\n       if (this.driver_marker1) {\r\n        await this.clearMarker(this.driver_marker1);\r\n        this.driver_marker1 = null;\r\n      }\r\n  \r\n      // Clear other markers\r\n      if (this.destinationMarker1) {\r\n        await this.clearMarker(this.destinationMarker1);\r\n        this.destinationMarker1 = null;\r\n      }\r\n  \r\n      // Clear other markers\r\n      if (this.marker1) {\r\n        await this.clearMarker(this.marker1);\r\n        this.marker1 = null;\r\n      }\r\n  \r\n      if (this.marker2) {\r\n        await this.clearMarker(this.marker2);\r\n        this.marker2 = null;\r\n      }\r\n  \r\n      \r\n  \r\n    } catch (e) {\r\n      console.error('Error clearing markers:', e);\r\n    }\r\n  }\r\n  \r\n  \r\n  private async clearMarker(marker) {\r\n    if (marker) {\r\n      try {\r\n        await this.map.newMap.removeMarker(marker);\r\n        console.log(\"Marker was cleared!\");\r\n      } catch (error) {\r\n        console.error('Error clearing marker:', error);\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  async clearPolyline(polyline) {\r\n    if (polyline) {\r\n      try {\r\n        await this.map.newMap.removePolylines(polyline);\r\n        console.log('Polyline cleared:', polyline);\r\n        this.newPoly = null;\r\n      } catch (error) {\r\n        console.error('Error clearing polyline:', error);\r\n      }\r\n    } else {\r\n      console.warn('No polyline to clear');\r\n    }\r\n  }\r\n  \r\n  async ResetState(){\r\n    try{\r\n      // Clear previous markers\r\n      await this.clearPrevMarkers();\r\n  \r\n      // Clear any existing polylines\r\n      if (this.newPoly) {\r\n        await this.clearPolyline(this.newPoly);\r\n      }\r\n  \r\n      const availableHeight = 1024;\r\n  \r\n      this.map.newMap.enableTouch();\r\n  \r\n      this.setMapHeight();\r\n      window.addEventListener('resize', this.setMapHeight.bind(this));\r\n  \r\n      // Ensure the map respects the boundaries of the top and bottom bars\r\n      this.mapRef.nativeElement.style.height = `${availableHeight}px`;\r\n  \r\n      // // Start watching the user's position\r\n      // this.startPollingPosition();\r\n      \r\n    }catch(e){\r\n      throw new Error(e);\r\n      \r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n\r\n  async getDistanceandDirections() {\r\n    try {\r\n      if (!this.canStart) {\r\n       \r\n\r\n        console.log('LatLng:', this.DriverLatLng);\r\n\r\n        const origin1 = new google.maps.LatLng(this.DriverLatLng.lat, this.DriverLatLng.lng);\r\n        const origin2 = new google.maps.LatLng(this.DestinationLatLng.lat, this.DestinationLatLng.lng);\r\n\r\n        const request = {\r\n          origin: origin1,\r\n          destination: origin2,\r\n          travelMode: google.maps.TravelMode.DRIVING,\r\n        };\r\n\r\n        console.log('Directions request:', request);\r\n\r\n        this.geocode.directions.route(request, async (response, status) => {\r\n          console.log('Directions request status:', status);\r\n          if (status === 'OK') {\r\n            this.direction = response;\r\n            this.canStart = false;\r\n            this.distance = response.routes[0].legs[0].distance.value;\r\n\r\n            console.log('Directions response:', response);\r\n            console.log(\"Should Happen here.\");\r\n\r\n            this.distanceText = response.routes[0].legs[0].distance.text;\r\n            this.durationText = response.routes[0].legs[0].duration.text;\r\n\r\n            console.log('distanceText:', this.distanceText);\r\n            console.log('durationText:', this.durationText);\r\n\r\n            this.bounds = response.routes[0].bounds;\r\n\r\n            this.setMapHeight();\r\n            window.addEventListener('resize', this.setMapHeight.bind(this));\r\n\r\n            await this.createAndAddMarkers(this.DriverLatLng, this.DestinationLatLng);\r\n          } else {\r\n            this.overlay.showAlert('Error', `Failed to get directions: ${status}`);\r\n            this.canStart = false; // Reset canStart in case of error\r\n          }\r\n        });\r\n        this.canStart = true;\r\n      }\r\n    } catch (e) {\r\n      console.error('Error in getDistanceandDirections:', e);\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n      this.canStart = false; // Reset canStart in case of error\r\n    }\r\n  }\r\n\r\n  async ReturnHome() {\r\n    try {\r\n      this.canStart = false;\r\n      this.distanceText = null;\r\n      this.durationText = null;\r\n      this.riderInfo = null;\r\n      clearInterval(this.countdownInterval);\r\n      this.countdownStarted = false;\r\n      this.rideLostShown = false;\r\n\r\n      await this.ResetState();\r\n      this.EnterBookingStage();\r\n      await this.map.newMap.setCamera({\r\n        animate: true,\r\n        animationDuration: 500,\r\n        zoom: 15,\r\n        coordinate: this.LatLng,\r\n      });\r\n       // Optionally, you can re-subscribe to the listener here if needed\r\n       await this.database.updateOnlineState(true);\r\n       await this.fetchOnlineState();\r\n       await this.handleDriverRequestSnapshot();\r\n       this.removed = false;\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n    }\r\n  }\r\n\r\n  async presentCancelRideActionSheet() {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: await this.translate.get('HOME.CANCEL_RIDE.HEADER').toPromise(),\r\n      buttons: [\r\n        {\r\n          text: await this.translate.get('HOME.CANCEL_RIDE.CHANGED_MIND').toPromise(),\r\n          handler: () => {\r\n            this.cancelRide('Changed my mind');\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('HOME.CANCEL_RIDE.TOOK_TOO_LONG').toPromise(),\r\n          handler: () => {\r\n            this.cancelRide('Driver took too long');\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('HOME.CANCEL_RIDE.FOUND_ANOTHER').toPromise(),\r\n          handler: () => {\r\n            this.cancelRide('Found another ride');\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('HOME.CANCEL_RIDE.OTHER').toPromise(),\r\n          handler: () => {\r\n            this.cancelRide('Other');\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('COMMON.CANCEL').toPromise(),\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n  \r\n  async cancelRide(reason: string) {\r\n   \r\n    this.driverCleared = true;\r\n    this.overlay.showLoader('Cancelling Ride..');\r\n    const rideRef = doc(this.firestore, 'Request', this.driverData.currentRequestId);\r\n    const rideSnapshot = await getDoc(rideRef);\r\n    const rideData = rideSnapshot.data();\r\n    await updateDoc(rideRef, {\r\n      status: 'cancelled',\r\n      cancellationReason: reason,\r\n      canceledBy: 'driver'\r\n    });\r\n     // Create a new document in the cancelledRides collection\r\n     const cancelledRideRef = doc(collection(this.firestore, 'CancelledRides'));\r\n     await setDoc(cancelledRideRef, {\r\n       ...rideData,\r\n       status: 'cancelled',\r\n       cancellationReason: reason,\r\n       canceledBy: 'rider',\r\n       cancelledAt: serverTimestamp(),\r\n       originalRequestId: this.requestID\r\n     });\r\n    const toast = await this.toastController.create({\r\n      message: 'Ride has been cancelled.',\r\n      duration: 2000\r\n    });\r\n    this.overlay.hideLoader();\r\n    this.ReturnHome();\r\n    await toast.present();\r\n  }\r\n\r\n  async ClearRide() {\r\n    try {\r\n      this.ReturnHome();\r\n    } catch (e) {\r\n      this.overlay.showAlert('Error', JSON.stringify(e));\r\n    }\r\n  }\r\n\r\n  async createAndAddMarkers(loc, des) {\r\n    const markerSize = { width: 30, height: 30 };\r\n    const iconAnchor = { x: 10, y: 0 }; // Center bottom of the icon\r\n  \r\n    try {\r\n      this.map.newMap.disableTouch();\r\n  \r\n      // Add start marker\r\n      this.marker1 = await this.map.newMap.addMarker({\r\n        coordinate: loc,\r\n        iconUrl: 'assets/icon/point.png',\r\n        title: 'Start',\r\n        iconSize: markerSize,\r\n        iconAnchor: iconAnchor,\r\n        iconOrigin: { x: 1, y: 0 },\r\n      });\r\n  \r\n      // Add destination marker\r\n      this.marker2 = await this.map.newMap.addMarker({\r\n        coordinate: des,\r\n        iconUrl: 'assets/icon/flag.png',\r\n        title: 'Destination',\r\n        iconSize: markerSize,\r\n        iconAnchor: iconAnchor,\r\n        iconOrigin: { x: 1, y: 0 },\r\n      });\r\n  \r\n      // Calculate the center point between the start and destination\r\n      const locs = [\r\n        { geoCode: { latitude: loc.lat, longitude: loc.lng } },\r\n        { geoCode: { latitude: des.lat, longitude: des.lng } },\r\n      ];\r\n  \r\n      const center = this.map.calculateCenter(locs);\r\n  \r\n      // Calculate the bounds\r\n      const bounds = new google.maps.LatLngBounds();\r\n      bounds.extend(new google.maps.LatLng(loc.lat, loc.lng));\r\n      bounds.extend(new google.maps.LatLng(des.lat, des.lng));\r\n  \r\n      // Set map height before calculating zoom level\r\n      const availableHeight = this.mapRef.nativeElement.offsetHeight;\r\n  \r\n      // Prepare map dimensions for calculating zoom level\r\n      const mapDim = {\r\n        height: availableHeight,\r\n        width: this.mapRef.nativeElement.offsetWidth,\r\n      };\r\n  \r\n      // Calculate zoom level\r\n      const zoomLevel = this.map.getBoundsZoomLevel(bounds, mapDim);\r\n\r\n      console.log(loc.lat,  loc.lng);\r\n      console.log(des.lat,  des.lng);\r\n  \r\n  \r\n      // Manually set zoom level if needed\r\n      const adjustedZoomLevel = zoomLevel - 1; // Adjust as necessary\r\n  \r\n       await this.map.setCameraToLocation({ lat: center.latitude, lng: center.longitude }, adjustedZoomLevel, this.map.calculateBearing(loc, des));\r\n  \r\n\r\n  \r\n      // Add polyline between the start and destination\r\n      await this.addPolyline(loc, des);\r\n  \r\n    } catch (error) {\r\n      console.error('Error adding markers and polyline:', error);\r\n    }\r\n  }\r\n\r\n\r\n  // Interval in milliseconds for updating the route\r\nUPDATE_INTERVAL = 10000; // Update every 10 seconds\r\n\r\nasync handleDriverToRider(driverLatLng, riderLatLng) {\r\n  const markerSize = { width: 30, height: 30 };\r\n  const iconAnchor = { x: 10, y: 0 }; // Center bottom of the icon\r\n  let stageTransitioned = false;\r\n\r\n  try {\r\n    // Add driver marker at the starting position\r\n    const driverMarker = await this.map.newMap.addMarker({\r\n      coordinate: driverLatLng,\r\n      iconUrl: 'assets/icon/car.png',\r\n      title: 'Driver',\r\n      iconSize: markerSize,\r\n      iconAnchor: iconAnchor,\r\n      iconOrigin: { x: 2, y: 0 },\r\n    });\r\n    this.driver_marker = driverMarker;\r\n\r\n    // Add rider marker at the destination position\r\n    const riderMarker = await this.map.newMap.addMarker({\r\n      coordinate: riderLatLng,\r\n      iconUrl: this.database.user.photoURL, // Change this to your rider icon URL\r\n      title: 'Rider',\r\n      iconSize: markerSize,\r\n      iconAnchor: iconAnchor,\r\n      iconOrigin: { x: 2, y: 0 },\r\n    });\r\n    this.rider_marker = riderMarker;\r\n\r\n    // Function to update route, duration, and distance\r\n    const updateRoute = async () => {\r\n      const request = {\r\n        origin: driverLatLng,\r\n        destination: riderLatLng,\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      };\r\n\r\n      this.geocode.directions.route(request, async (response, status) => {\r\n        if (status === 'OK') {\r\n          const path = response.routes[0].overview_path.map(latlng => ({\r\n            lat: latlng.lat(),\r\n            lng: latlng.lng()\r\n          }));\r\n          \r\n          // Update these specific variables for driver-to-rider stage\r\n          this.driverToRiderDuration = response.routes[0].legs[0].duration.text;\r\n          this.driverToRiderDistance = response.routes[0].legs[0].distance.text;\r\n          \r\n          // Also update the general variables for backward compatibility\r\n          this.duration = this.driverToRiderDuration;\r\n          this.distance = this.driverToRiderDistance;\r\n\r\n          console.log(`Driving to Rider - Duration: ${this.driverToRiderDuration}, Distance: ${this.driverToRiderDistance}`);\r\n\r\n          const locs = [\r\n            { geoCode: { latitude: driverLatLng.lat, longitude: driverLatLng.lng } },\r\n            { geoCode: { latitude: riderLatLng.lat, longitude: riderLatLng.lng } },\r\n          ];\r\n\r\n          const center = this.map.calculateCenter(locs);\r\n\r\n          const bounds = new google.maps.LatLngBounds();\r\n          bounds.extend(new google.maps.LatLng(driverLatLng.lat, driverLatLng.lng));\r\n          bounds.extend(new google.maps.LatLng(riderLatLng.lat, riderLatLng.lng));\r\n  \r\n        \r\n          const availableHeight = this.mapRef.nativeElement.offsetHeight;\r\n  \r\n          // Prepare map dimensions for calculating zoom level\r\n          const mapDim = {\r\n            height: availableHeight,\r\n            width: this.mapRef.nativeElement.offsetWidth,\r\n          };\r\n  \r\n          // Calculate zoom level\r\n          const zoomLevel = this.map.getBoundsZoomLevel(bounds, mapDim);\r\n  \r\n          // Manually set zoom level if needed\r\n          const adjustedZoomLevel = zoomLevel - 1; // Adjust as necessary\r\n  \r\n         await this.map.setCameraToLocation({ lat: center.latitude, lng: center.longitude }, adjustedZoomLevel, this.map.calculateBearing(driverLatLng, riderLatLng));\r\n  \r\n\r\n          // Update polyline for the route\r\n          if (this.newPoly) {\r\n            await this.clearPolyline(this.newPoly);\r\n           }\r\n           await this.addPolyline(driverLatLng, riderLatLng);\r\n\r\n            // Call EnterDrivingToDestinationStage after determining duration and distance\r\n          if (!stageTransitioned) {\r\n            this.EnterTrackingStage();\r\n            this.setMapHeightDrivertoDestination();\r\n            window.addEventListener('resize', this.setMapHeightDrivertoDestination.bind(this));\r\n            stageTransitioned = true;\r\n            this.overlay.hideLoader();\r\n          }\r\n\r\n          // Animate the driver marker along the path to the rider\r\n          await this.animateMarker(this.driver_marker, path, 'assets/icon/car.png');\r\n        } else {\r\n          console.error('Direction ERROR:', response);\r\n          this.overlay.showAlert('Direction ERROR', JSON.stringify(response));\r\n        }\r\n      });\r\n    };\r\n\r\n    // Start updating the route periodically\r\n    const routeUpdate$ = interval(this.UPDATE_INTERVAL).pipe(\r\n      switchMap(() => updateRoute())\r\n    );\r\n\r\n    // Subscribe to the interval observable to start updating\r\n    this.routeUpdateSubscription = routeUpdate$.subscribe();\r\n\r\n    // Cleanup subscription when the component or context is destroyed\r\n    // Call routeUpdateSubscription.unsubscribe() when needed\r\n\r\n  } catch (error) {\r\n    console.error('Error handling driver to rider:', error);\r\n  }\r\n}\r\n\r\nasync handleRiderToDestination(driverLatLng, destinationLatLng) {\r\n  const markerSize = { width: 30, height: 30 };\r\n  const iconAnchor = { x: 10, y: 0 }; // Center bottom of the icon\r\n  let stageTransitioned = false;\r\n\r\n  try {\r\n    // Update driver marker to driver's current position\r\n    const driverMarker = await this.map.newMap.addMarker({\r\n      coordinate: driverLatLng,\r\n      iconUrl: 'assets/icon/car.png',\r\n      title: 'Driver',\r\n      iconSize: markerSize,\r\n      iconAnchor: iconAnchor,\r\n      iconOrigin: { x: 0, y: 0 },\r\n    });\r\n    this.driver_marker1 = driverMarker;\r\n\r\n    // Add destination marker\r\n    const destinationMarker = await this.map.newMap.addMarker({\r\n      coordinate: destinationLatLng,\r\n      iconUrl: 'assets/icon/flag.png',\r\n      title: 'Destination',\r\n      iconSize: markerSize,\r\n      iconAnchor: iconAnchor,\r\n      iconOrigin: { x: 0, y: 0 },\r\n    });\r\n    this.destinationMarker1 = destinationMarker;\r\n\r\n    // Function to update route, duration, and distance\r\n    const updateRoute = async () => {\r\n      const request = {\r\n        origin: driverLatLng,\r\n        destination: destinationLatLng,\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      };\r\n\r\n      this.geocode.directions.route(request, async (response, status) => {\r\n        if (status === 'OK') {\r\n          const path = response.routes[0].overview_path.map(latlng => ({\r\n            lat: latlng.lat(),\r\n            lng: latlng.lng()\r\n          }));\r\n          \r\n          // Update these specific variables for rider-to-destination stage\r\n          this.riderToDestinationDuration = response.routes[0].legs[0].duration.text;\r\n          this.riderToDestinationDistance = response.routes[0].legs[0].distance.text;\r\n          \r\n          // Also update the general variables for backward compatibility\r\n          this.duration = this.riderToDestinationDuration;\r\n          this.distance = this.riderToDestinationDistance;\r\n\r\n          console.log(`Driving to Destination - Duration: ${this.riderToDestinationDuration}, Distance: ${this.riderToDestinationDistance}`);\r\n\r\n          const locs = [\r\n            { geoCode: { latitude: driverLatLng.lat, longitude: driverLatLng.lng } },\r\n            { geoCode: { latitude: destinationLatLng.lat, longitude: destinationLatLng.lng } },\r\n          ];\r\n\r\n          const center = this.map.calculateCenter(locs);\r\n\r\n          const bounds = new google.maps.LatLngBounds();\r\n          bounds.extend(new google.maps.LatLng(driverLatLng.lat, driverLatLng.lng));\r\n          bounds.extend(new google.maps.LatLng(destinationLatLng.lat, destinationLatLng.lng));\r\n\r\n          const availableHeight = this.mapRef.nativeElement.offsetHeight;\r\n\r\n          // Prepare map dimensions for calculating zoom level\r\n          const mapDim = {\r\n            height: availableHeight,\r\n            width: this.mapRef.nativeElement.offsetWidth,\r\n          };\r\n\r\n          // Calculate zoom level\r\n          const zoomLevel = this.map.getBoundsZoomLevel(bounds, mapDim);\r\n\r\n          // Manually set zoom level if needed\r\n          const adjustedZoomLevel = zoomLevel - 1; // Adjust as necessary\r\n\r\n          \r\n          await this.map.setCameraToLocation({ lat: center.latitude, lng: center.longitude }, adjustedZoomLevel, this.map.calculateBearing(driverLatLng, destinationLatLng));\r\n  \r\n\r\n\r\n          // Update polyline for the route\r\n          if (this.newPoly) {\r\n            await this.clearPolyline(this.newPoly);\r\n          }\r\n          await this.addPolyline(driverLatLng, destinationLatLng);\r\n\r\n          // Call EnterDrivingToDestinationStage after determining duration and distance\r\n          if (!stageTransitioned) {\r\n            this.EnterDrivingToDestinationStage();\r\n                \r\n            this.setMapHeightDrivertoDestination();\r\n            window.addEventListener('resize', this.setMapHeightDrivertoDestination.bind(this));\r\n            stageTransitioned = true;\r\n            this.overlay.hideLoader();\r\n          }\r\n\r\n          // Animate the driver marker along the path to the destination\r\n          await this.animateMarker(this.driver_marker, path, 'assets/icon/car.png');\r\n        } else {\r\n          console.error('Direction ERROR:', response);\r\n          this.overlay.showAlert('Direction ERROR', JSON.stringify(response));\r\n        }\r\n      });\r\n    };\r\n\r\n    // Start updating the route periodically\r\n    const routeUpdate$ = interval(this.UPDATE_INTERVAL).pipe(\r\n      switchMap(() => updateRoute())\r\n    );\r\n\r\n    // Subscribe to the interval observable to start updating\r\n    this.routeUpdateSubscription = routeUpdate$.subscribe();\r\n\r\n\r\n  } catch (error) {\r\n    console.error('Error handling rider to destination:', error);\r\n  }\r\n}\r\n  \r\n  \r\n\r\n  async animateMarker(marker, path, iconUrl) {\r\n    const markerSize = { width: 50, height: 50 };\r\n    const iconAnchor = { x: 25, y: 50 }; // Center bottom of the icon\r\n  \r\n    const moveMarker = async (i) => {\r\n      if (i >= path.length) return;\r\n  \r\n      await this.map.newMap.removeMarker(marker);\r\n      const coordinate = path[i] instanceof google.maps.LatLng ? \r\n                         { lat: path[i].lat(), lng: path[i].lng() } : \r\n                         { lat: path[i].lat, lng: path[i].lng };\r\n      marker = await this.map.newMap.addMarker({\r\n        coordinate: coordinate,\r\n        iconUrl: iconUrl,\r\n        title: 'Moving Marker',\r\n        iconSize: markerSize,\r\n        iconAnchor: iconAnchor,\r\n        iconOrigin: { x: 0, y: 0 },\r\n      });\r\n  \r\n      requestAnimationFrame(() => moveMarker(i + 1));\r\n    };\r\n  \r\n    await moveMarker(0);\r\n  \r\n    // Store the last position of the animated marker\r\n    this.animatedMarker = marker;\r\n  }\r\n  \r\n\r\n\r\n  async addPolyline(loc: { lat: number, lng: number }, des: { lat: number, lng: number }): Promise<(LatLng | LatLngLiteral)[]> {\r\n    try {\r\n      const polylineColor = \"#007bff\";\r\n      const polylines: Polyline[] = [\r\n        {\r\n          path: [\r\n            { lat: loc.lat, lng: loc.lng },\r\n            { lat: des.lat, lng: des.lng }\r\n          ],\r\n          strokeColor: polylineColor,\r\n          strokeWeight: 8,\r\n          geodesic: true\r\n        }\r\n      ];\r\n  \r\n      this.newPoly = await this.map.newMap.addPolylines(polylines);\r\n      return polylines[0].path as (LatLng | LatLngLiteral)[]; // Ensure the return type is always an array\r\n    } catch (e) {\r\n      console.log('Error Adding Polyline: ', e);\r\n      return [];\r\n    }\r\n  }\r\n  \r\n\r\nngOnDestroy() {\r\n  this.stopBackgroundGeolocation();\r\n  if (this.routeUpdateSubscription) {\r\n    this.routeUpdateSubscription.unsubscribe();\r\n  }\r\n  if (this.newPoly) {\r\n    this.clearPolyline(this.newPoly);\r\n  }\r\n  window.removeEventListener('resize', this.setMapHeight.bind(this));\r\n}\r\n\r\n\r\n  EnterBookingStage() {\r\n    this.bookingStage = true;\r\n    this.confirmStage = false;\r\n    this.trackingStage = false;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = false;\r\n  }\r\n\r\n  EnterConfirmStage() {\r\n    this.bookingStage = false;\r\n    this.confirmStage = true;\r\n    this.trackingStage = false;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = false;\r\n  }\r\n\r\n  EnterSearchingStage() {\r\n    this.bookingStage = false;\r\n    this.confirmStage = false;\r\n    this.trackingStage = false;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = false;\r\n  }\r\n\r\n  EnterNoDriverStage() {\r\n    this.bookingStage = false;\r\n    this.confirmStage = false;\r\n    this.trackingStage = false;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = false;\r\n  }\r\n\r\n  EnterTrackingStage() {\r\n    this.bookingStage = false;\r\n    this.confirmStage = false;\r\n    this.trackingStage = true;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = false;\r\n  }\r\n\r\n  EnterDrivingToDestinationStage() {\r\n    this.bookingStage = false;\r\n    this.confirmStage = false;\r\n    this.trackingStage = false;\r\n    this.mapPinStage = false;\r\n    this.drivingToDestinationStage = true;\r\n  }\r\n\r\n  async changeLanguage(language: string) {\r\n    this.translate.use(language);\r\n    // Optionally save the language preference\r\n    localStorage.setItem('preferred_language', language);\r\n  }\r\n\r\n  private async showLocationPermissionAlert() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Location Access Required',\r\n      message: 'This app needs access to your location to connect you with nearby riders. Please enable location access to continue.',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  private async handleLocationPermissionDenied() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Location Access Denied',\r\n      message: 'This app requires location access to function. Please enable location access in your device settings to continue.',\r\n      buttons: [\r\n        {\r\n          text: 'Open Settings',\r\n          handler: () => {\r\n            // Open device settings if possible\r\n            if (this.platform.is('ios')) {\r\n              window.open('app-settings:');\r\n            } else if (this.platform.is('android')) {\r\n              window.open('package:settings');\r\n            }\r\n          }\r\n        },\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            // Optionally redirect to a different page or show alternative content\r\n            console.log('User cancelled location permission');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  // Optional: Create a reusable loading message service\r\n  private getLoadingMessage(state: string): string {\r\n    const messages = {\r\n      confirmed: 'Navigating to rider...',\r\n      started: 'Starting trip...',\r\n      stopped: 'Completing trip...',\r\n      // Add more states as needed\r\n    };\r\n    return messages[state] || 'Loading...';\r\n  }\r\n}\r\n","<!--menu button-->\r\n<ion-header class=\"ion-no-border custom-toolbar-background\" [translucent]=\"true\">\r\n  <div #topBar>\r\n    <ion-fab *ngIf=\"bookingStage\" vertical=\"top\" horizontal=\"end\" class=\"lowered-fab\">\r\n      <ion-fab-button size=\"large\" *ngIf=\"!currentState\" color=\"danger\" (click)=\"SwitchOn()\">\r\n        <ion-icon *ngIf=\"!approve\" name=\"power-sharp\" color=\"light\"></ion-icon>\r\n        <ion-spinner *ngIf=\"approve\" name=\"crescent\"></ion-spinner>\r\n      </ion-fab-button>\r\n      <ion-fab-button size=\"large\" *ngIf=\"currentState\" color=\"success\" (click)=\"SwitchOff()\">\r\n        <ion-icon *ngIf=\"!approve\" name=\"power-sharp\" color=\"light\"></ion-icon>\r\n        <ion-spinner *ngIf=\"approve\" name=\"crescent\"></ion-spinner>\r\n      </ion-fab-button>\r\n    </ion-fab>\r\n\r\n    <ion-fab *ngIf=\"trackingStage\" vertical=\"top\" horizontal=\"start\" style=\"margin-top: 20px;\">\r\n      <ion-fab-button color=\"success\" (click)=\"EnterChat()\">\r\n        <ion-icon name=\"chatbubbles\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-fab>\r\n\r\n    <ion-fab *ngIf=\"trackingStage\" vertical=\"top\" horizontal=\"end\" style=\"margin-top: 20px;\">\r\n      <ion-fab-button color=\"danger\" (click)=\"presentCancelRideActionSheet()\">\r\n        <ion-icon name=\"close-sharp\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-fab>\r\n\r\n    <ion-fab *ngIf=\"confirmStage\" vertical=\"top\" horizontal=\"end\" style=\"margin-top: 20px;\">\r\n      <ion-fab-button color=\"danger\" (click)=\"presentCancelRideActionSheet()\">\r\n        <ion-icon name=\"close-sharp\"></ion-icon>\r\n      </ion-fab-button>\r\n    </ion-fab>\r\n  </div>\r\n</ion-header>\r\n\r\n<!--Capacitor Google Map-->\r\n\r\n<ion-content [fullscreen]=\"true\" scroll-y=\"false\">\r\n  <capacitor-google-maps #map></capacitor-google-maps>\r\n  <ion-fab *ngIf=\"bookingStage && showResetLocationButton\" vertical=\"bottom\" horizontal=\"end\" style=\"margin-bottom: 200px;\">\r\n    <ion-fab-button color=\"light\" (click)=\"resetLocation()\">\r\n      <ion-icon name=\"locate\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab>\r\n</ion-content>\r\n\r\n<ion-footer [translucent]=\"true\" class=\"ion-no-border\">\r\n  <div #bottomBar>\r\n    <ion-row>\r\n      <!--Price Section-->\r\n      <ion-list class=\"shadow-top\" *ngIf=\"bookingStage\" lines=\"full\">\r\n        <ion-item-group class=\"ion-margin-horizontal ion-margin-bottom\">\r\n          <ion-button shape=\"round\" class=\"main-button\" color=\"primary\" size=\"large\" type=\"submit\" expand=\"block\">\r\n            <ion-icon slot=\"start\" name=\"cash-sharp\" color=\"light\"></ion-icon>\r\n            <ion-label color=\"light\">{{ 'HOME.EARNINGS' | translate }}{{earnings}}</ion-label>\r\n          </ion-button>\r\n        </ion-item-group>\r\n      </ion-list>\r\n\r\n      <!-- Accept Ride Section -->\r\n      <ion-list class='shadow-top book modern-accept-card' *ngIf=\"confirmStage\" lines=\"none\" (click)=\"AcceptRide()\">\r\n        <div class=\"accept-ride-content\" *ngIf=\"distanceText\">\r\n          <div class=\"ride-info-row\">\r\n            <div class=\"trip-details\">\r\n              <ion-icon name=\"time-outline\"></ion-icon> {{durationText}}\r\n              <ion-icon name=\"locate-outline\" class=\"ml-2\"></ion-icon> {{distanceText}}\r\n            </div>\r\n            <div class=\"price-tag\">${{riderInfo?.price}}</div>\r\n          </div>\r\n          \r\n          <div class=\"location-container\">\r\n            <ion-icon name=\"location\"></ion-icon>\r\n            <span>{{riderInfo?.Rider_Location}}</span>\r\n          </div>\r\n          \r\n          <div class=\"countdown-container\">\r\n            <div class=\"timer-indicator\">\r\n              {{ 'HOME.TIME_LEFT' | translate }} <strong>{{riderInfo?.countDown}}</strong> {{ 'HOME.SECONDS' | translate }}\r\n            </div>\r\n          </div>\r\n          \r\n          <ion-button shape=\"round\" class=\"accept-button\" color=\"light\" type=\"submit\" expand=\"block\">\r\n            <ion-icon slot=\"start\" name=\"checkmark-sharp\"></ion-icon>\r\n            <span>{{ 'HOME.ACCEPT' | translate }}</span>\r\n          </ion-button>\r\n        </div>\r\n\r\n        <!-- Loading state -->\r\n        <div class=\"accept-ride-content\" *ngIf=\"!distanceText\">\r\n          <div class=\"ride-info-row\">\r\n            <div class=\"trip-details\">\r\n              <ion-skeleton-text [animated]=\"true\" style=\"width: 120px;\"></ion-skeleton-text>\r\n            </div>\r\n            <div class=\"price-tag\">\r\n              <ion-skeleton-text [animated]=\"true\" style=\"width: 60px;\"></ion-skeleton-text>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"location-container\">\r\n            <ion-skeleton-text [animated]=\"true\" style=\"width: 180px;\"></ion-skeleton-text>\r\n          </div>\r\n          \r\n          <div class=\"countdown-container\">\r\n            <div class=\"timer-indicator\">\r\n              <ion-skeleton-text [animated]=\"true\" style=\"width: 150px;\"></ion-skeleton-text>\r\n            </div>\r\n          </div>\r\n          \r\n          <ion-button disabled shape=\"round\" class=\"accept-button\" color=\"light\" expand=\"block\">\r\n            <ion-skeleton-text [animated]=\"true\" style=\"width: 120px;\"></ion-skeleton-text>\r\n          </ion-button>\r\n        </div>\r\n      </ion-list>\r\n\r\n      <!--Pick Ride Section-->\r\n      <ion-list class='shadow-top' *ngIf=\"trackingStage || drivingToDestinationStage\" lines=\"none\">\r\n        <ion-list-header class=\"ion-margin-bottom\">\r\n          <ion-label class=\"ion-text-center\">\r\n            <h1>{{ 'HOME.ARRIVAL_IN' | translate }} {{durationText}}</h1>\r\n          </ion-label>\r\n        </ion-list-header>\r\n\r\n        <div class=\"card\">\r\n          <ion-item>\r\n            <ion-item>\r\n              <ion-label>\r\n                <h1>{{ 'HOME.YOUR_RIDER_IS' | translate }} {{riderInfo.Rider_name}}</h1>\r\n                <p><strong>{{ 'HOME.DESTINATION' | translate }} </strong>{{riderInfo.Rider_Destination}}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n            <ion-item class=\"price\">\r\n              <ion-avatar>\r\n                <ion-img [src]=\"riderInfo.Rider_imgUrl\"></ion-img>\r\n              </ion-avatar>\r\n              <ion-label>\r\n                <p><ion-icon slot=\"icon-only\" color=\"secondary\" name=\"star\"></ion-icon> 5 </p>\r\n              </ion-label>\r\n            </ion-item>\r\n          </ion-item>\r\n\r\n          <ion-item>\r\n            <ion-item *ngIf=\"cash\">\r\n              <ion-label>\r\n                <h1><ion-icon color='primary' slot=\"icon-only\" name=\"cash\"></ion-icon> Cash</h1>\r\n              </ion-label>\r\n            </ion-item>\r\n            <ion-item *ngIf=\"!cash\">\r\n              <ion-label>\r\n                <h1><ion-icon color='primary' slot=\"icon-only\" name=\"card\"></ion-icon> Card</h1>\r\n              </ion-label>\r\n            </ion-item>\r\n            <ion-item class=\"price\">\r\n              <ion-label>\r\n                <h1>${{riderInfo.price}}</h1>\r\n              </ion-label>\r\n            </ion-item>\r\n          </ion-item>\r\n        </div>\r\n\r\n        <!--pick up button and drop off button-->\r\n        <ion-item-group class=\"ion-margin-horizontal ion-margin-bottom\">\r\n          <ion-button shape=\"round\" class=\"main-button\" *ngIf=\"trackingStage\" color=\"success\" size=\"large\" type=\"submit\" (click)=\"PickUp()\" expand=\"block\">\r\n            <ion-icon slot=\"start\" name=\"checkmark-sharp\" color=\"light\"></ion-icon>\r\n            <ion-label color=\"light\">{{ 'HOME.PICK_UP' | translate }}</ion-label>\r\n          </ion-button>\r\n\r\n          <ion-button *ngIf=\"drivingToDestinationStage\" shape=\"round\" class=\"main-button\" color=\"success\" size=\"large\" type=\"submit\" (click)=\"DropOff()\" expand=\"block\">\r\n            <ion-icon slot=\"start\" name=\"checkmark-sharp\" color=\"light\"></ion-icon>\r\n            <ion-label color=\"light\">{{ 'HOME.DROP_OFF' | translate }}</ion-label>\r\n          </ion-button>\r\n\r\n          <ion-button *ngIf=\"trackingStage || drivingToDestinationStage\" shape=\"round\" class=\"main-button\" color=\"primary\" size=\"large\" type=\"submit\" (click)=\"Navigate()\" expand=\"block\">\r\n            <ion-icon slot=\"start\" name=\"map-sharp\" color=\"light\"></ion-icon>\r\n            <ion-label color=\"light\">{{ 'HOME.NAVIGATE' | translate }}</ion-label>\r\n          </ion-button>\r\n        </ion-item-group>\r\n      </ion-list>\r\n    </ion-row>\r\n  </div>\r\n</ion-footer>\r\n","import { Injectable } from '@angular/core';\r\nimport { Client } from '@googlemaps/google-maps-services-js';\r\nimport { environment } from 'src/environments/environment';\r\nimport { OverlayService } from './overlay.service';\r\nimport { Observable, of } from 'rxjs';\r\nimport { HttpParams, HttpClient } from '@angular/common/http';\r\nimport { catchError, map } from 'rxjs/operators';\r\n\r\ndeclare let google;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class GeocodeService {\r\n  service = new google.maps.DistanceMatrixService();\r\n  directions = new google.maps.DirectionsService();\r\n  private readonly apiUrl = 'https://maps.googleapis.com/maps/api';\r\n\r\n  constructor(private client: Client, private overlay: OverlayService, private http: HttpClient) { }\r\n\r\n  getAddress(lat: number, lng: number): Observable<any> {\r\n    const url = `${this.apiUrl}/geocode/json`;\r\n    const params = new HttpParams()\r\n      .set('latlng', `${lat},${lng}`)\r\n      .set('key', environment.apiKey);\r\n  \r\n    return this.http.get(url, { params }).pipe(\r\n      map((response: any) => response),\r\n      catchError((error) => {\r\n        console.error('Error in reverse geocoding:', error);\r\n        this.overlay.showAlert('GeoError', error.message);\r\n        return of(null);\r\n      })\r\n    );\r\n  }\r\n\r\n  // Convert the address to lat and lng\r\n  getLatLng(address: string): Observable<any> {\r\n    const url = `${this.apiUrl}/geocode/json`;\r\n    const params = new HttpParams()\r\n      .set('address', address)\r\n      .set('key', environment.apiKey);\r\n\r\n    return this.http.get(url, { params }).pipe(\r\n      map((response: any) => response),\r\n      catchError((error) => {\r\n        console.error('Error in geocoding:', error);\r\n        this.overlay.showAlert('GeoError', error.message);\r\n        return of(null);\r\n      })\r\n    );\r\n  }\r\n\r\n  // Get the distance between the origin and destination\r\n  async getDirections(from: string, to: string): Promise<any> {\r\n    try {\r\n      // You can implement the directions request here using google.maps.DirectionsService\r\n    } catch (e) {\r\n      this.overlay.showAlert('GeoError', e);\r\n      console.log(e);\r\n    }\r\n  }\r\n}\r\n","import { Injectable, NgZone } from '@angular/core';\r\nimport { throwError } from 'rxjs';\r\n import { GoogleMap, MapType } from '@capacitor/google-maps';\r\nimport { environment } from 'src/environments/environment';\r\nimport { GeocodeService } from './geocode.service';\r\nimport { OverlayService } from './overlay.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MapService {\r\n  LatLng: { lat: any; lng: any; };\r\n  locationAddress: string = 'Loading..';\r\n  showResetLocationButton: boolean;\r\n  mapPinStage: any;\r\n  D_LatLng: { lat: any; lng: any; };\r\n  actualLocation: any;\r\n   exampleMapId: any;\r\n  newMap: GoogleMap;\r\n\r\n  constructor(private overlay: OverlayService, private geocode: GeocodeService) {\r\n   }\r\n\r\n  //create google maps get the map movement listener\r\n  async createMap( ref, coords ) {\r\n    try{\r\n     this.newMap = await GoogleMap.create({\r\n       id: 'my-cool-map',\r\n       element: ref,\r\n       apiKey: environment.apiKey,\r\n       config: {\r\n         center: {\r\n           lat: 5.5122138,\r\n           lng: 7.4919135\r\n         },\r\n         zoom: 8,\r\n       },\r\n     });\r\n \r\n     this.LatLng =  {\r\n       lat: coords.coords.latitude,\r\n       lng: coords.coords.longitude\r\n     }\r\n\r\n     this.newMap.enableTrafficLayer(true);\r\n     this.newMap.enableCurrentLocation(true);\r\n     \r\n     await this.newMap.setCamera({\r\n       animate: true,\r\n       animationDuration: 500,\r\n       zoom: 15,\r\n       coordinate: this.LatLng\r\n     })\r\n     try {\r\n      const address = await this.geocode.getAddress(this.LatLng.lat, this.LatLng.lng).toPromise();\r\n      this.actualLocation = address.results[0].formatted_address;\r\n      this.locationAddress = address.results[1].address_components[0].long_name + ' ' + address.results[1].address_components[1].long_name;\r\n    } catch (error) {\r\n      console.error('Error fetching address:', error);\r\n    }\r\n        this.newMap.enableCurrentLocation(true);\r\n   }catch(e){\r\n      this.overlay.showAlert('Error', e)\r\n   }\r\n }\r\n\r\n \r\n\r\n\r\n calculateCenter(points) {\r\n  const latitudes = points.map(p => p.geoCode.latitude);\r\n  const longitudes = points.map(p => p.geoCode.longitude);\r\n\r\n  const avgLat = latitudes.reduce((a, b) => a + b, 0) / latitudes.length;\r\n  const avgLng = longitudes.reduce((a, b) => a + b, 0) / longitudes.length;\r\n\r\n  return { latitude: avgLat, longitude: avgLng };\r\n}\r\n\r\n\r\n getBoundsZoomLevel(bounds, mapDim) {\r\n  const WORLD_DIM = { height: 256, width: 256 };\r\n    const ZOOM_MAX = 21;\r\n\r\n    const latRad = lat => {\r\n      const sin = Math.sin((lat * Math.PI) / 180);\r\n      const radX2 = Math.log((1 + sin) / (1 - sin)) / 2;\r\n      return Math.max(Math.min(radX2, Math.PI), -Math.PI) / 2;\r\n    };\r\n\r\n    const zoom = (mapPx, worldPx, fraction) =>\r\n      Math.floor(Math.log(mapPx / worldPx / fraction) / Math.LN2);\r\n\r\n    const ne = bounds.getNorthEast();\r\n    const sw = bounds.getSouthWest();\r\n\r\n    const latFraction = (latRad(ne.lat()) - latRad(sw.lat())) / Math.PI;\r\n\r\n    const lngDiff = ne.lng() - sw.lng();\r\n    const lngFraction = (lngDiff < 0 ? lngDiff + 360 : lngDiff) / 360;\r\n\r\n    const latZoom = zoom(mapDim.height, WORLD_DIM.height, latFraction);\r\n    const lngZoom = zoom(mapDim.width, WORLD_DIM.width, lngFraction);\r\n\r\n    return Math.min(latZoom, lngZoom, ZOOM_MAX);\r\n}\r\n\r\n\r\nasync setCameraToLocation(coordinate: { lat: number; lng: number }, zoom: number, bearing: any) {\r\n  if (this.newMap) {\r\n    try {\r\n      await this.newMap.setCamera({\r\n        animate: true,\r\n        animationDuration: 500,\r\n        zoom: zoom,\r\n        coordinate: coordinate,\r\n        bearing: bearing\r\n      });\r\n    } catch (error) {\r\n      console.error('Error setting camera:', error);\r\n    }\r\n  } else {\r\n    console.error('Map is not initialized.');\r\n  }\r\n}\r\n// Add other necessary methods like getAddress here\r\n\r\n\r\ncalculateBearing(start, end) {\r\n  const startLat = start.lat * (Math.PI / 180);\r\n  const startLng = start.lng * (Math.PI / 180);\r\n  const endLat = end.lat * (Math.PI / 180);\r\n  const endLng = end.lng * (Math.PI / 180);\r\n\r\n  const dLng = endLng - startLng;\r\n  const y = Math.sin(dLng) * Math.cos(endLat);\r\n  const x = Math.cos(startLat) * Math.sin(endLat) - Math.sin(startLat) * Math.cos(endLat) * Math.cos(dLng);\r\n  const bearing = Math.atan2(y, x) * (180 / Math.PI);\r\n\r\n  return (bearing + 360) % 360;\r\n}\r\n\r\n \r\n \r\n \r\n}\r\n","export {};\n","import { registerPlugin } from '@capacitor/core';\nconst Device = registerPlugin('Device', {\n    web: () => import('./web').then(m => new m.DeviceWeb()),\n});\nexport * from './definitions';\nexport { Device };\n","import { CapacitorGoogleMaps } from './implementation';\nexport class LatLngBounds {\n    constructor(bounds) {\n        this.southwest = bounds.southwest;\n        this.center = bounds.center;\n        this.northeast = bounds.northeast;\n    }\n    async contains(point) {\n        const result = await CapacitorGoogleMaps.mapBoundsContains({\n            bounds: this,\n            point,\n        });\n        return result['contains'];\n    }\n    async extend(point) {\n        const result = await CapacitorGoogleMaps.mapBoundsExtend({\n            bounds: this,\n            point,\n        });\n        this.southwest = result['bounds']['southwest'];\n        this.center = result['bounds']['center'];\n        this.northeast = result['bounds']['northeast'];\n        return this;\n    }\n}\nexport var MapType;\n(function (MapType) {\n    /**\n     * Basic map.\n     */\n    MapType[\"Normal\"] = \"Normal\";\n    /**\n     * Satellite imagery with roads and labels.\n     */\n    MapType[\"Hybrid\"] = \"Hybrid\";\n    /**\n     * Satellite imagery with no labels.\n     */\n    MapType[\"Satellite\"] = \"Satellite\";\n    /**\n     * Topographic data.\n     */\n    MapType[\"Terrain\"] = \"Terrain\";\n    /**\n     * No base map tiles.\n     */\n    MapType[\"None\"] = \"None\";\n})(MapType || (MapType = {}));\n","import { registerPlugin } from '@capacitor/core';\nconst CapacitorGoogleMaps = registerPlugin('CapacitorGoogleMaps', {\n    web: () => import('./web').then(m => new m.CapacitorGoogleMapsWeb()),\n});\nCapacitorGoogleMaps.addListener('isMapInFocus', data => {\n    var _a;\n    const x = data.x;\n    const y = data.y;\n    const elem = document.elementFromPoint(x, y);\n    const internalId = (_a = elem === null || elem === void 0 ? void 0 : elem.dataset) === null || _a === void 0 ? void 0 : _a.internalId;\n    const mapInFocus = internalId === data.mapId;\n    CapacitorGoogleMaps.dispatchMapEvent({ id: data.mapId, focus: mapInFocus });\n});\nexport { CapacitorGoogleMaps };\n","/* eslint-disable @typescript-eslint/no-namespace */\nimport { LatLngBounds, MapType, } from './definitions';\nimport { GoogleMap } from './map';\nexport { GoogleMap, LatLngBounds, MapType, };\n","import { Capacitor } from '@capacitor/core';\nimport { LatLngBounds, MapType } from './definitions';\nimport { CapacitorGoogleMaps } from './implementation';\nclass MapCustomElement extends HTMLElement {\n    constructor() {\n        super();\n    }\n    connectedCallback() {\n        this.innerHTML = '';\n        if (Capacitor.getPlatform() == 'ios') {\n            this.style.overflow = 'scroll';\n            this.style['-webkit-overflow-scrolling'] = 'touch';\n            const overflowDiv = document.createElement('div');\n            overflowDiv.style.height = '200%';\n            this.appendChild(overflowDiv);\n        }\n    }\n}\ncustomElements.define('capacitor-google-map', MapCustomElement);\nexport class GoogleMap {\n    constructor(id) {\n        this.element = null;\n        this.resizeObserver = null;\n        this.handleScrollEvent = () => this.updateMapBounds();\n        this.id = id;\n    }\n    /**\n     * Creates a new instance of a Google Map\n     * @param options\n     * @param callback\n     * @returns GoogleMap\n     */\n    static async create(options, callback) {\n        const newMap = new GoogleMap(options.id);\n        if (!options.element) {\n            throw new Error('container element is required');\n        }\n        if (options.config.androidLiteMode === undefined) {\n            options.config.androidLiteMode = false;\n        }\n        newMap.element = options.element;\n        newMap.element.dataset.internalId = options.id;\n        const elementBounds = await GoogleMap.getElementBounds(options.element);\n        options.config.width = elementBounds.width;\n        options.config.height = elementBounds.height;\n        options.config.x = elementBounds.x;\n        options.config.y = elementBounds.y;\n        options.config.devicePixelRatio = window.devicePixelRatio;\n        if (Capacitor.getPlatform() == 'android') {\n            newMap.initScrolling();\n        }\n        if (Capacitor.isNativePlatform()) {\n            options.element = {};\n            const getMapBounds = () => {\n                var _a, _b;\n                const mapRect = (_b = (_a = newMap.element) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) !== null && _b !== void 0 ? _b : {};\n                return {\n                    x: mapRect.x,\n                    y: mapRect.y,\n                    width: mapRect.width,\n                    height: mapRect.height,\n                };\n            };\n            const onDisplay = () => {\n                CapacitorGoogleMaps.onDisplay({\n                    id: newMap.id,\n                    mapBounds: getMapBounds(),\n                });\n            };\n            const onResize = () => {\n                CapacitorGoogleMaps.onResize({\n                    id: newMap.id,\n                    mapBounds: getMapBounds(),\n                });\n            };\n            const ionicPage = newMap.element.closest('.ion-page');\n            if (Capacitor.getPlatform() === 'ios' && ionicPage) {\n                ionicPage.addEventListener('ionViewWillEnter', () => {\n                    setTimeout(() => {\n                        onDisplay();\n                    }, 100);\n                });\n                ionicPage.addEventListener('ionViewDidEnter', () => {\n                    setTimeout(() => {\n                        onDisplay();\n                    }, 100);\n                });\n            }\n            const lastState = {\n                width: elementBounds.width,\n                height: elementBounds.height,\n                isHidden: false,\n            };\n            newMap.resizeObserver = new ResizeObserver(() => {\n                if (newMap.element != null) {\n                    const mapRect = newMap.element.getBoundingClientRect();\n                    const isHidden = mapRect.width === 0 && mapRect.height === 0;\n                    if (!isHidden) {\n                        if (lastState.isHidden) {\n                            if (Capacitor.getPlatform() === 'ios' && !ionicPage) {\n                                onDisplay();\n                            }\n                        }\n                        else if (lastState.width !== mapRect.width ||\n                            lastState.height !== mapRect.height) {\n                            onResize();\n                        }\n                    }\n                    lastState.width = mapRect.width;\n                    lastState.height = mapRect.height;\n                    lastState.isHidden = isHidden;\n                }\n            });\n            newMap.resizeObserver.observe(newMap.element);\n        }\n        // small delay to allow for iOS WKWebView to setup corresponding element sub-scroll views ???\n        await new Promise((resolve, reject) => {\n            setTimeout(async () => {\n                try {\n                    await CapacitorGoogleMaps.create(options);\n                    resolve(undefined);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }, 200);\n        });\n        if (callback) {\n            const onMapReadyListener = await CapacitorGoogleMaps.addListener('onMapReady', (data) => {\n                if (data.mapId == newMap.id) {\n                    callback(data);\n                    onMapReadyListener.remove();\n                }\n            });\n        }\n        return newMap;\n    }\n    static async getElementBounds(element) {\n        return new Promise(resolve => {\n            let elementBounds = element.getBoundingClientRect();\n            if (elementBounds.width == 0) {\n                let retries = 0;\n                const boundsInterval = setInterval(function () {\n                    if (elementBounds.width == 0 && retries < 30) {\n                        elementBounds = element.getBoundingClientRect();\n                        retries++;\n                    }\n                    else {\n                        if (retries == 30) {\n                            console.warn('Map size could not be determined');\n                        }\n                        clearInterval(boundsInterval);\n                        resolve(elementBounds);\n                    }\n                }, 100);\n            }\n            else {\n                resolve(elementBounds);\n            }\n        });\n    }\n    /**\n     * Enable touch events on native map\n     *\n     * @returns void\n     */\n    async enableTouch() {\n        return CapacitorGoogleMaps.enableTouch({\n            id: this.id,\n        });\n    }\n    /**\n     * Disable touch events on native map\n     *\n     * @returns void\n     */\n    async disableTouch() {\n        return CapacitorGoogleMaps.disableTouch({\n            id: this.id,\n        });\n    }\n    /**\n     * Enable marker clustering\n     *\n     * @param minClusterSize - The minimum number of markers that can be clustered together.\n     * @defaultValue 4\n     *\n     * @returns void\n     */\n    async enableClustering(minClusterSize) {\n        return CapacitorGoogleMaps.enableClustering({\n            id: this.id,\n            minClusterSize,\n        });\n    }\n    /**\n     * Disable marker clustering\n     *\n     * @returns void\n     */\n    async disableClustering() {\n        return CapacitorGoogleMaps.disableClustering({\n            id: this.id,\n        });\n    }\n    /**\n     * Adds a marker to the map\n     *\n     * @param marker\n     * @returns created marker id\n     */\n    async addMarker(marker) {\n        const res = await CapacitorGoogleMaps.addMarker({\n            id: this.id,\n            marker,\n        });\n        return res.id;\n    }\n    /**\n     * Adds multiple markers to the map\n     *\n     * @param markers\n     * @returns array of created marker IDs\n     */\n    async addMarkers(markers) {\n        const res = await CapacitorGoogleMaps.addMarkers({\n            id: this.id,\n            markers,\n        });\n        return res.ids;\n    }\n    /**\n     * Remove marker from the map\n     *\n     * @param id id of the marker to remove from the map\n     * @returns\n     */\n    async removeMarker(id) {\n        return CapacitorGoogleMaps.removeMarker({\n            id: this.id,\n            markerId: id,\n        });\n    }\n    /**\n     * Remove markers from the map\n     *\n     * @param ids array of ids to remove from the map\n     * @returns\n     */\n    async removeMarkers(ids) {\n        return CapacitorGoogleMaps.removeMarkers({\n            id: this.id,\n            markerIds: ids,\n        });\n    }\n    async addPolygons(polygons) {\n        const res = await CapacitorGoogleMaps.addPolygons({\n            id: this.id,\n            polygons,\n        });\n        return res.ids;\n    }\n    async addPolylines(polylines) {\n        const res = await CapacitorGoogleMaps.addPolylines({\n            id: this.id,\n            polylines,\n        });\n        return res.ids;\n    }\n    async removePolygons(ids) {\n        return CapacitorGoogleMaps.removePolygons({\n            id: this.id,\n            polygonIds: ids,\n        });\n    }\n    async addCircles(circles) {\n        const res = await CapacitorGoogleMaps.addCircles({\n            id: this.id,\n            circles,\n        });\n        return res.ids;\n    }\n    async removeCircles(ids) {\n        return CapacitorGoogleMaps.removeCircles({\n            id: this.id,\n            circleIds: ids,\n        });\n    }\n    async removePolylines(ids) {\n        return CapacitorGoogleMaps.removePolylines({\n            id: this.id,\n            polylineIds: ids,\n        });\n    }\n    /**\n     * Destroy the current instance of the map\n     */\n    async destroy() {\n        var _a;\n        if (Capacitor.getPlatform() == 'android') {\n            this.disableScrolling();\n        }\n        if (Capacitor.isNativePlatform()) {\n            (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n        }\n        this.removeAllMapListeners();\n        return CapacitorGoogleMaps.destroy({\n            id: this.id,\n        });\n    }\n    /**\n     * Update the map camera configuration\n     *\n     * @param config\n     * @returns\n     */\n    async setCamera(config) {\n        return CapacitorGoogleMaps.setCamera({\n            id: this.id,\n            config,\n        });\n    }\n    async getMapType() {\n        const { type } = await CapacitorGoogleMaps.getMapType({ id: this.id });\n        return MapType[type];\n    }\n    /**\n     * Sets the type of map tiles that should be displayed.\n     *\n     * @param mapType\n     * @returns\n     */\n    async setMapType(mapType) {\n        return CapacitorGoogleMaps.setMapType({\n            id: this.id,\n            mapType,\n        });\n    }\n    /**\n     * Sets whether indoor maps are shown, where available.\n     *\n     * @param enabled\n     * @returns\n     */\n    async enableIndoorMaps(enabled) {\n        return CapacitorGoogleMaps.enableIndoorMaps({\n            id: this.id,\n            enabled,\n        });\n    }\n    /**\n     * Controls whether the map is drawing traffic data, if available.\n     *\n     * @param enabled\n     * @returns\n     */\n    async enableTrafficLayer(enabled) {\n        return CapacitorGoogleMaps.enableTrafficLayer({\n            id: this.id,\n            enabled,\n        });\n    }\n    /**\n     * Show accessibility elements for overlay objects, such as Marker and Polyline.\n     *\n     * Only available on iOS.\n     *\n     * @param enabled\n     * @returns\n     */\n    async enableAccessibilityElements(enabled) {\n        return CapacitorGoogleMaps.enableAccessibilityElements({\n            id: this.id,\n            enabled,\n        });\n    }\n    /**\n     * Set whether the My Location dot and accuracy circle is enabled.\n     *\n     * @param enabled\n     * @returns\n     */\n    async enableCurrentLocation(enabled) {\n        return CapacitorGoogleMaps.enableCurrentLocation({\n            id: this.id,\n            enabled,\n        });\n    }\n    /**\n     * Set padding on the 'visible' region of the view.\n     *\n     * @param padding\n     * @returns\n     */\n    async setPadding(padding) {\n        return CapacitorGoogleMaps.setPadding({\n            id: this.id,\n            padding,\n        });\n    }\n    /**\n     * Get the map's current viewport latitude and longitude bounds.\n     *\n     * @returns {LatLngBounds}\n     */\n    async getMapBounds() {\n        return new LatLngBounds(await CapacitorGoogleMaps.getMapBounds({\n            id: this.id,\n        }));\n    }\n    async fitBounds(bounds, padding) {\n        return CapacitorGoogleMaps.fitBounds({\n            id: this.id,\n            bounds,\n            padding,\n        });\n    }\n    initScrolling() {\n        const ionContents = document.getElementsByTagName('ion-content');\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (let i = 0; i < ionContents.length; i++) {\n            ionContents[i].scrollEvents = true;\n        }\n        window.addEventListener('ionScroll', this.handleScrollEvent);\n        window.addEventListener('scroll', this.handleScrollEvent);\n        window.addEventListener('resize', this.handleScrollEvent);\n        if (screen.orientation) {\n            screen.orientation.addEventListener('change', () => {\n                setTimeout(this.updateMapBounds, 500);\n            });\n        }\n        else {\n            window.addEventListener('orientationchange', () => {\n                setTimeout(this.updateMapBounds, 500);\n            });\n        }\n    }\n    disableScrolling() {\n        window.removeEventListener('ionScroll', this.handleScrollEvent);\n        window.removeEventListener('scroll', this.handleScrollEvent);\n        window.removeEventListener('resize', this.handleScrollEvent);\n        if (screen.orientation) {\n            screen.orientation.removeEventListener('change', () => {\n                setTimeout(this.updateMapBounds, 1000);\n            });\n        }\n        else {\n            window.removeEventListener('orientationchange', () => {\n                setTimeout(this.updateMapBounds, 1000);\n            });\n        }\n    }\n    updateMapBounds() {\n        if (this.element) {\n            const mapRect = this.element.getBoundingClientRect();\n            CapacitorGoogleMaps.onScroll({\n                id: this.id,\n                mapBounds: {\n                    x: mapRect.x,\n                    y: mapRect.y,\n                    width: mapRect.width,\n                    height: mapRect.height,\n                },\n            });\n        }\n    }\n    /*\n    private findContainerElement(): HTMLElement | null {\n      if (!this.element) {\n        return null;\n      }\n  \n      let parentElement = this.element.parentElement;\n      while (parentElement !== null) {\n        if (window.getComputedStyle(parentElement).overflowY !== 'hidden') {\n          return parentElement;\n        }\n  \n        parentElement = parentElement.parentElement;\n      }\n  \n      return null;\n    }\n    */\n    /**\n     * Set the event listener on the map for 'onCameraIdle' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnCameraIdleListener(callback) {\n        if (this.onCameraIdleListener) {\n            this.onCameraIdleListener.remove();\n        }\n        if (callback) {\n            this.onCameraIdleListener = await CapacitorGoogleMaps.addListener('onCameraIdle', this.generateCallback(callback));\n        }\n        else {\n            this.onCameraIdleListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onBoundsChanged' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnBoundsChangedListener(callback) {\n        if (this.onBoundsChangedListener) {\n            this.onBoundsChangedListener.remove();\n        }\n        if (callback) {\n            this.onBoundsChangedListener = await CapacitorGoogleMaps.addListener('onBoundsChanged', this.generateCallback(callback));\n        }\n        else {\n            this.onBoundsChangedListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onCameraMoveStarted' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnCameraMoveStartedListener(callback) {\n        if (this.onCameraMoveStartedListener) {\n            this.onCameraMoveStartedListener.remove();\n        }\n        if (callback) {\n            this.onCameraMoveStartedListener = await CapacitorGoogleMaps.addListener('onCameraMoveStarted', this.generateCallback(callback));\n        }\n        else {\n            this.onCameraMoveStartedListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onClusterClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnClusterClickListener(callback) {\n        if (this.onClusterClickListener) {\n            this.onClusterClickListener.remove();\n        }\n        if (callback) {\n            this.onClusterClickListener = await CapacitorGoogleMaps.addListener('onClusterClick', this.generateCallback(callback));\n        }\n        else {\n            this.onClusterClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onClusterInfoWindowClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnClusterInfoWindowClickListener(callback) {\n        if (this.onClusterInfoWindowClickListener) {\n            this.onClusterInfoWindowClickListener.remove();\n        }\n        if (callback) {\n            this.onClusterInfoWindowClickListener =\n                await CapacitorGoogleMaps.addListener('onClusterInfoWindowClick', this.generateCallback(callback));\n        }\n        else {\n            this.onClusterInfoWindowClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onInfoWindowClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnInfoWindowClickListener(callback) {\n        if (this.onInfoWindowClickListener) {\n            this.onInfoWindowClickListener.remove();\n        }\n        if (callback) {\n            this.onInfoWindowClickListener = await CapacitorGoogleMaps.addListener('onInfoWindowClick', this.generateCallback(callback));\n        }\n        else {\n            this.onInfoWindowClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMapClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMapClickListener(callback) {\n        if (this.onMapClickListener) {\n            this.onMapClickListener.remove();\n        }\n        if (callback) {\n            this.onMapClickListener = await CapacitorGoogleMaps.addListener('onMapClick', this.generateCallback(callback));\n        }\n        else {\n            this.onMapClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onPolygonClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnPolygonClickListener(callback) {\n        if (this.onPolygonClickListener) {\n            this.onPolygonClickListener.remove();\n        }\n        if (callback) {\n            this.onPolygonClickListener = await CapacitorGoogleMaps.addListener('onPolygonClick', this.generateCallback(callback));\n        }\n        else {\n            this.onPolygonClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onCircleClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnCircleClickListener(callback) {\n        if (this.onCircleClickListener)\n            [this.onCircleClickListener.remove()];\n        if (callback) {\n            this.onCircleClickListener = await CapacitorGoogleMaps.addListener('onCircleClick', this.generateCallback(callback));\n        }\n        else {\n            this.onCircleClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMarkerClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMarkerClickListener(callback) {\n        if (this.onMarkerClickListener) {\n            this.onMarkerClickListener.remove();\n        }\n        if (callback) {\n            this.onMarkerClickListener = await CapacitorGoogleMaps.addListener('onMarkerClick', this.generateCallback(callback));\n        }\n        else {\n            this.onMarkerClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onPolylineClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnPolylineClickListener(callback) {\n        if (this.onPolylineClickListener) {\n            this.onPolylineClickListener.remove();\n        }\n        if (callback) {\n            this.onPolylineClickListener = await CapacitorGoogleMaps.addListener('onPolylineClick', this.generateCallback(callback));\n        }\n        else {\n            this.onPolylineClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMarkerDragStart' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMarkerDragStartListener(callback) {\n        if (this.onMarkerDragStartListener) {\n            this.onMarkerDragStartListener.remove();\n        }\n        if (callback) {\n            this.onMarkerDragStartListener = await CapacitorGoogleMaps.addListener('onMarkerDragStart', this.generateCallback(callback));\n        }\n        else {\n            this.onMarkerDragStartListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMarkerDrag' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMarkerDragListener(callback) {\n        if (this.onMarkerDragListener) {\n            this.onMarkerDragListener.remove();\n        }\n        if (callback) {\n            this.onMarkerDragListener = await CapacitorGoogleMaps.addListener('onMarkerDrag', this.generateCallback(callback));\n        }\n        else {\n            this.onMarkerDragListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMarkerDragEnd' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMarkerDragEndListener(callback) {\n        if (this.onMarkerDragEndListener) {\n            this.onMarkerDragEndListener.remove();\n        }\n        if (callback) {\n            this.onMarkerDragEndListener = await CapacitorGoogleMaps.addListener('onMarkerDragEnd', this.generateCallback(callback));\n        }\n        else {\n            this.onMarkerDragEndListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMyLocationButtonClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMyLocationButtonClickListener(callback) {\n        if (this.onMyLocationButtonClickListener) {\n            this.onMyLocationButtonClickListener.remove();\n        }\n        if (callback) {\n            this.onMyLocationButtonClickListener =\n                await CapacitorGoogleMaps.addListener('onMyLocationButtonClick', this.generateCallback(callback));\n        }\n        else {\n            this.onMyLocationButtonClickListener = undefined;\n        }\n    }\n    /**\n     * Set the event listener on the map for 'onMyLocationClick' events.\n     *\n     * @param callback\n     * @returns\n     */\n    async setOnMyLocationClickListener(callback) {\n        if (this.onMyLocationClickListener) {\n            this.onMyLocationClickListener.remove();\n        }\n        if (callback) {\n            this.onMyLocationClickListener = await CapacitorGoogleMaps.addListener('onMyLocationClick', this.generateCallback(callback));\n        }\n        else {\n            this.onMyLocationClickListener = undefined;\n        }\n    }\n    /**\n     * Remove all event listeners on the map.\n     *\n     * @param callback\n     * @returns\n     */\n    async removeAllMapListeners() {\n        if (this.onBoundsChangedListener) {\n            this.onBoundsChangedListener.remove();\n            this.onBoundsChangedListener = undefined;\n        }\n        if (this.onCameraIdleListener) {\n            this.onCameraIdleListener.remove();\n            this.onCameraIdleListener = undefined;\n        }\n        if (this.onCameraMoveStartedListener) {\n            this.onCameraMoveStartedListener.remove();\n            this.onCameraMoveStartedListener = undefined;\n        }\n        if (this.onClusterClickListener) {\n            this.onClusterClickListener.remove();\n            this.onClusterClickListener = undefined;\n        }\n        if (this.onClusterInfoWindowClickListener) {\n            this.onClusterInfoWindowClickListener.remove();\n            this.onClusterInfoWindowClickListener = undefined;\n        }\n        if (this.onInfoWindowClickListener) {\n            this.onInfoWindowClickListener.remove();\n            this.onInfoWindowClickListener = undefined;\n        }\n        if (this.onMapClickListener) {\n            this.onMapClickListener.remove();\n            this.onMapClickListener = undefined;\n        }\n        if (this.onPolylineClickListener) {\n            this.onPolylineClickListener.remove();\n            this.onPolylineClickListener = undefined;\n        }\n        if (this.onMarkerClickListener) {\n            this.onMarkerClickListener.remove();\n            this.onMarkerClickListener = undefined;\n        }\n        if (this.onPolygonClickListener) {\n            this.onPolygonClickListener.remove();\n            this.onPolygonClickListener = undefined;\n        }\n        if (this.onCircleClickListener) {\n            this.onCircleClickListener.remove();\n            this.onCircleClickListener = undefined;\n        }\n        if (this.onMarkerDragStartListener) {\n            this.onMarkerDragStartListener.remove();\n            this.onMarkerDragStartListener = undefined;\n        }\n        if (this.onMarkerDragListener) {\n            this.onMarkerDragListener.remove();\n            this.onMarkerDragListener = undefined;\n        }\n        if (this.onMarkerDragEndListener) {\n            this.onMarkerDragEndListener.remove();\n            this.onMarkerDragEndListener = undefined;\n        }\n        if (this.onMyLocationButtonClickListener) {\n            this.onMyLocationButtonClickListener.remove();\n            this.onMyLocationButtonClickListener = undefined;\n        }\n        if (this.onMyLocationClickListener) {\n            this.onMyLocationClickListener.remove();\n            this.onMyLocationClickListener = undefined;\n        }\n    }\n    generateCallback(callback) {\n        const mapId = this.id;\n        return (data) => {\n            if (data.mapId == mapId) {\n                callback(data);\n            }\n        };\n    }\n}\n","import { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period = 0, scheduler = async) {\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(subscriber => {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber, counter: 0, period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    const { subscriber, counter, period } = state;\n    subscriber.next(counter);\n    this.schedule({ subscriber, counter: counter + 1, period }, period);\n}\n"],"names":["ChangeDetectorRef","ElementRef","NgZone","Geolocation","ModalController","Platform","ToastController","ActionSheetController","AlertController","ModalOptions","BehaviorSubject","interval","Observable","Subscription","doc","onSnapshot","Firestore","updateDoc","deleteField","getDoc","collection","setDoc","serverTimestamp","Device","Network","switchMap","EnrouteChatComponent","TripSummaryComponent","i0","HomePage","constructor","auth","map","firestore","database","ngZone","geocode","overlay","cdr","toastController","actionSheetController","platform","alertController","modalCtrl","translate","ngAfterViewInit","EnterBookingStage","permissionStatus","checkPermissions","location","showLocationPermissionAlert","requestResult","requestPermissions","Error","coordinates","getCurrentPosition","enableHighAccuracy","initializeNetworkMonitoring","fetchOnlineState","createMap","mapRef","nativeElement","mapy","setMapHeight","window","addEventListener","bind","initializeBackButtonCustomHandler","LatLng","lat","coords","latitude","lng","longitude","updateDriverLocation","DestinationLatLng","getEarnings","subscribe","d","earnings","Earnings","getCards","cards","approve","forEach","element","selected","selectedCard","name","handleDriverRequestSnapshot","actualLocation","locationAddress","newMap","setOnCameraIdleListener","run","showResetLocationButton","e","code","handleLocationPermissionDenied","showAlert","message","startPollingPosition","checkPlatform","status","getStatus","isConnected","connected","networkStatus$","next","console","log","addListener","router","navigate","backButtonSubscription","backButton","subscribeWithPriority","handleBackButton","bookingStage","showExitConfirmation","confirmStage","ResetState","trackingStage","showCancelRideConfirmation","drivingToDestinationStage","showCannotExitAlert","alert","create","header","buttons","text","role","handler","navigator","exitApp","present","presentCancelRideActionSheet","info","getInfo","startBackgroundGeolocation","pollInterval","updatePosition","position","DriverLatLng","error","setTimeout","checkAndClearIncompleteRide","user","currentUser","driverDocRef","uid","driverDoc","driverData","data","currentRequestId","requestRef","requestDoc","requestData","clearCurrentRequestId","lastHandledState","BackgroundGeolocation","warn","options","stationaryRadius","distanceFilter","desiredAccuracy","debug","notificationTitle","notificationText","startOnBoot","stopOnTerminate","locationProvider","provider","ANDROID_ACTIVITY_PROVIDER","fastestInterval","activitiesInterval","stopOnStillActivity","configure","on","start","stopBackgroundGeolocation","stop","getRiderLocation","driverId","then","riderLocation","catch","onAuthStateChanged","driverRequestUnsubscribe","riderInfo","handleCancelledState","handlePendingState","handleConfirmedState","handleStartedState","handleStoppedState","doco","userDocRef","Rider_id","docSnapshot","exists","acceptedState","countdownStarted","EnterConfirmStage","cash","card","Des_lat","Des_lng","getDistanceandDirections","enableCurrentLocation","watchCountdown","requestId","requestID","countdownWatcher","currentCountdown","countDown","ClearRide","FCOUNT","UpdateCountDown","time","requestDocRef","startCountdown","initialTime","timeRemaining","updateCountdown","completeRideAndProcessPayment","rideData","processPayment","updateRideHistory","Drivershare","price","amt","updateEarnings","createHistory","Loc_lat","Loc_lng","showLoader","Promise","all","handleDriverToRider","updateOnlineState","handleRiderToDestination","clearPrevMarkers","newPoly","clearPolyline","showTripSummary","requestIdToUse","modal","component","componentProps","tripData","cssClass","backdropDismiss","onDidDismiss","ReturnHome","bottomBarHeight","bottomBar","offsetHeight","availableHeight","innerHeight","style","height","setMapHeight2HandleDrivertoRider","setMapHeightDrivertoDestination","canceledBy","cancellationReason","removed","EnterChat","userId","swipeToClose","startTimer","sec","nop","updateCountDown","unsubscribe","chooseCard","event","updateCard","number","type","id","hideLoader","JSON","stringify","AcceptRide","resetLocation","setCamera","animate","animationDuration","zoom","coordinate","PickUp","canShowButton","DropOff","Navigate","onlineState","getOnlineState","currentState","detectChanges","SwitchOn","SwitchOff","animatedMarker","clearMarker","routeUpdateSubscription","rider_marker","driver_marker","destinationMarker","driver_marker1","destinationMarker1","marker1","marker2","marker","removeMarker","polyline","removePolylines","enableTouch","canStart","origin1","google","maps","origin2","request","origin","destination","travelMode","TravelMode","DRIVING","directions","route","response","direction","distance","routes","legs","value","distanceText","durationText","duration","bounds","createAndAddMarkers","clearInterval","countdownInterval","rideLostShown","actionSheet","get","toPromise","cancelRide","reason","driverCleared","rideRef","rideSnapshot","cancelledRideRef","cancelledAt","originalRequestId","toast","loc","des","markerSize","width","iconAnchor","x","y","disableTouch","addMarker","iconUrl","title","iconSize","iconOrigin","locs","geoCode","center","calculateCenter","LatLngBounds","extend","mapDim","offsetWidth","zoomLevel","getBoundsZoomLevel","adjustedZoomLevel","setCameraToLocation","calculateBearing","addPolyline","driverLatLng","riderLatLng","stageTransitioned","driverMarker","riderMarker","photoURL","updateRoute","path","overview_path","latlng","driverToRiderDuration","driverToRiderDistance","EnterTrackingStage","animateMarker","routeUpdate$","UPDATE_INTERVAL","pipe","destinationLatLng","riderToDestinationDuration","riderToDestinationDistance","EnterDrivingToDestinationStage","moveMarker","i","length","requestAnimationFrame","polylineColor","polylines","strokeColor","strokeWeight","geodesic","addPolylines","ngOnDestroy","removeEventListener","mapPinStage","EnterSearchingStage","EnterNoDriverStage","changeLanguage","language","use","localStorage","setItem","is","open","getLoadingMessage","state","messages","confirmed","started","stopped","selectors","viewQuery","environment","of","HttpParams","catchError","GeocodeService","client","http","DistanceMatrixService","DirectionsService","getAddress","url","apiUrl","params","set","apiKey","getLatLng","address","getDirections","from","to","factory","providedIn","GoogleMap","MapService","ref","config","enableTrafficLayer","results","formatted_address","address_components","long_name","points","latitudes","p","longitudes","avgLat","reduce","a","b","avgLng","WORLD_DIM","ZOOM_MAX","latRad","sin","Math","PI","radX2","max","min","mapPx","worldPx","fraction","floor","LN2","ne","getNorthEast","sw","getSouthWest","latFraction","lngDiff","lngFraction","latZoom","lngZoom","bearing","end","startLat","startLng","endLat","endLng","dLng","cos","atan2","registerPlugin","web","m","DeviceWeb","CapacitorGoogleMaps","southwest","northeast","contains","point","result","mapBoundsContains","mapBoundsExtend","MapType","CapacitorGoogleMapsWeb","_a","elem","document","elementFromPoint","internalId","dataset","mapInFocus","mapId","dispatchMapEvent","focus","Capacitor","MapCustomElement","HTMLElement","connectedCallback","innerHTML","getPlatform","overflow","overflowDiv","createElement","appendChild","customElements","define","resizeObserver","handleScrollEvent","updateMapBounds","callback","androidLiteMode","undefined","elementBounds","getElementBounds","devicePixelRatio","initScrolling","isNativePlatform","getMapBounds","_b","mapRect","getBoundingClientRect","onDisplay","mapBounds","onResize","ionicPage","closest","lastState","isHidden","ResizeObserver","observe","resolve","reject","err","onMapReadyListener","remove","retries","boundsInterval","setInterval","enableClustering","minClusterSize","disableClustering","res","addMarkers","markers","ids","markerId","removeMarkers","markerIds","addPolygons","polygons","removePolygons","polygonIds","addCircles","circles","removeCircles","circleIds","polylineIds","destroy","disableScrolling","disconnect","removeAllMapListeners","getMapType","setMapType","mapType","enableIndoorMaps","enabled","enableAccessibilityElements","setPadding","padding","fitBounds","ionContents","getElementsByTagName","scrollEvents","screen","orientation","onScroll","onCameraIdleListener","generateCallback","setOnBoundsChangedListener","onBoundsChangedListener","setOnCameraMoveStartedListener","onCameraMoveStartedListener","setOnClusterClickListener","onClusterClickListener","setOnClusterInfoWindowClickListener","onClusterInfoWindowClickListener","setOnInfoWindowClickListener","onInfoWindowClickListener","setOnMapClickListener","onMapClickListener","setOnPolygonClickListener","onPolygonClickListener","setOnCircleClickListener","onCircleClickListener","setOnMarkerClickListener","onMarkerClickListener","setOnPolylineClickListener","onPolylineClickListener","setOnMarkerDragStartListener","onMarkerDragStartListener","setOnMarkerDragListener","onMarkerDragListener","setOnMarkerDragEndListener","onMarkerDragEndListener","setOnMyLocationButtonClickListener","onMyLocationButtonClickListener","setOnMyLocationClickListener","onMyLocationClickListener","async","isNumeric","period","scheduler","schedule","subscriber","add","dispatch","counter"],"sourceRoot":"webpack:///","x_google_ignoreList":[6,7,8,9,10,11,12]}